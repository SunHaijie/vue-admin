(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c83af3f"],{"0238":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"category"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.addFirst({type:"category_first_add"})}}},[t._v("添加一级分类")]),a("hr",{staticClass:"hr-e9e9e9"}),a("div",[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"category-wrap"},t._l(t.category.item,(function(e){return a("div",{key:e.id,staticClass:"category"},[a("h4",[a("svg-icon",{attrs:{"icon-class":"plus"}}),t._v(" "+t._s(e.category_name)+" "),a("div",{staticClass:"button-group"},[a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){return t.editCategory({data:e,type:"category_first_edit"})}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"success",round:""},on:{click:function(a){return t.handlerAddChildren({data:e,type:"category_children_add"})}}},[t._v("添加子级")]),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){return t.deleteCategoryComfirm(e.id)}}},[t._v("删除")])],1)],1),e.children?a("ul",t._l(e.children,(function(e){return a("li",{key:e.id},[t._v(" "+t._s(e.category_name)+" "),a("div",{staticClass:"button-group"},[a("el-button",{attrs:{size:"mini",type:"danger",round:""}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",round:""}},[t._v("删除")])],1)])})),0):t._e()])})),0)]),a("el-col",{attrs:{span:16}},[a("h4",{staticClass:"menu-title"},[t._v("一级分类编辑")]),a("el-form",{ref:"categoryFrom",staticClass:"from-wrap",attrs:{"label-width":"142px"}},[t.category_first_input?a("el-form-item",{attrs:{label:"一级分类名称：",prop:"categoryName"}},[a("el-input",{attrs:{disabled:t.category_first_disabled},model:{value:t.form.categoryName,callback:function(e){t.$set(t.form,"categoryName",e)},expression:"form.categoryName"}})],1):t._e(),t.category_children_input?a("el-form-item",{attrs:{label:"二级分类名称：",prop:"secCategoryName"}},[a("el-input",{attrs:{disabled:t.category_children_disabled},model:{value:t.form.secCategoryName,callback:function(e){t.$set(t.form,"secCategoryName",e)},expression:"form.secCategoryName"}})],1):t._e(),a("el-form-item",[a("el-button",{attrs:{type:"danger",loading:t.submit_button_loading,disabled:t.submit_button_disabled},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)],1)],1)],1)},n=[],c=(a("4de4"),a("aa2a")),o=a("a6f4"),i=a("0c63"),u=a("2934"),s={name:"category",setup:function(t,e){var a=e.root,r=(e.refs,Object(i["a"])()),n=r.confirm,s=Object(u["c"])(),d=(s.getInfoCategory,s.getInfoCategoryAll),l=s.categoryItem,g=Object(o["g"])({categoryName:"",secCategoryName:""}),m=Object(o["g"])({item:[],current:[]}),f=Object(o["h"])(""),y=Object(o["h"])(!1),_=Object(o["h"])(!0),b=Object(o["h"])(!0),v=Object(o["h"])(!0),p=Object(o["h"])(!0),h=Object(o["h"])(!0),C=Object(o["h"])(""),N=function(){"category_first_add"==f.value&&j(),"category_first_edit"==f.value&&F(),"category_children_add"==f.value&&w()},j=function(){if(!g.categoryName)return a.$message({message:"分类名称不能为空",type:"error"}),!1;y.value=!0,AddFirstCategory({categoryName:g.categoryName}).then((function(t){var e=t.data;0===e.resCode&&(a.$message({message:e.message,type:"success"}),m.item.push(t.data.data)),y.value=!1,g.categoryName="",g.secCategoryName=""})).catch((function(t){y.value=!1,g.categoryName="",g.secCategoryName=""}))},O=function(t){f.value=t.type,_.value=!0,b.value=!1,v.value=!1,h.value=!1},k=function(t){f.value=t.type,m.current=t.data,v.value=!0,h.value=!1,p.value=!1,b.value=!0,g.categoryName=t.data.category_name},w=function(){if(!g.secCategoryName)return a.$message({message:"子级分类名称不能为空！！",type:"error"}),!1;var t={categoryName:g.secCategoryName,parentId:m.current.id};Object(c["a"])(t).then((function(t){var e=t.data;a.$message({message:e.message,type:"success"}),d(),g.secCategoryName=""}))},I=function(t){C.value=t,n({content:"确认删除当前信息，确认后将无法恢复！！",tip:"警告",fn:$,catchFn:function(){C.value=""}})},$=function(){Object(c["c"])({categoryId:C.value}).then((function(t){var e=m.item.filter((function(t){return t.id!=C.value}));m.item=e})).catch((function(t){}))},x=function(t){f.value=t.type,b.value=!1,v.value=!1,h.value=!1,g.categoryName=t.data.category_name,m.current=t.data},F=function(){if(0==m.current.length)return a.$message({message:"未选择分类！！",type:"error"}),!1;var t={id:m.current.id,categoryName:g.categoryName};Object(c["e"])(t).then((function(t){var e=t.data;a.$message({message:e.message,type:"success"}),m.current.category_name=e.data.data.categoryName,g.categoryName="",m.current=[]}))};return Object(o["e"])((function(){d()})),Object(o["i"])((function(){return l.item}),(function(t){m.item=t})),{category_first_input:_,category_children_input:b,submit_button_loading:y,category_first_disabled:v,category_children_disabled:p,submit_button_disabled:h,form:g,category:m,submit:N,addFirst:O,deleteCategory:$,deleteCategoryComfirm:I,editCategory:x,handlerAddChildren:k,addChildrenCategory:w}}},d=s,l=(a("4101"),a("2877")),g=Object(l["a"])(d,r,n,!1,null,"3c83f700",null);e["default"]=g.exports},"0c63":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var r=a("5c96"),n=a("a6f4");function c(){var t=Object(n["h"])(""),e=function(e){r["MessageBox"].confirm(e.content,e.tip||"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:e.type||"warning",center:!0}).then((function(){t.value=e.id||"",e.fn&&e.fn(e.id||"")})).catch((function(){e.catchFn&&e.catchFn()}))};return{str:t,confirm:e}}},2934:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return s}));var r=a("aa2a"),n=a("a6f4"),c=a("b775");function o(){var t=Object(n["g"])({item:[]}),e=function(){Object(r["g"])({}).then((function(e){t.item=e.data.data.data})).catch((function(t){}))},a=function(){Object(r["h"])({}).then((function(e){t.item=e.data.data})).catch((function(t){}))};return{getInfoCategory:e,getInfoCategoryAll:a,categoryItem:t}}function i(t){return c["a"].request({method:"post",url:"/uploadImgToken/",data:t})}function u(t){return c["a"].request({method:t.method||"post",url:t.url,data:t.data||{}})}function s(t){return c["a"].request({method:"post",url:"/cityPicker/",data:t})}},4101:function(t,e,a){"use strict";a("7f39")},"7f39":function(t,e,a){}}]);