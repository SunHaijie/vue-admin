{"remainingRequest":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/babel-loader/lib/index.js!/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace-vs/vue-admin/src/views/Info/dialog/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/src/views/Info/dialog/edit.vue","mtime":1614759360342},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQWRkSW5mbywgR2V0TGlzdCwgRWRpdEluZm8gfSBmcm9tICJAL2FwaS9uZXdzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgd2F0Y2ggfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnZGlhbG9nSW5mbycsCiAgcHJvcHM6IHsKICAgIGZsYWc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBjYXRlZ29yeTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfQogIH0sCiAgLy8gdnVlMi4wCiAgLy8gZGF0YSgpewogIC8vICAgICByZXR1cm4gIHsKICAvLyAgICAgICAgIGRpYWxvZ19pbmZvX2ZsYWc6IGZhbHNlLAogIC8vICAgICAgICAgZm9ybUxhYmVsV2lkdGg6ICc3MHB4JywKICAvLyAgICAgICAgIGZvcm06IHsKICAvLyAgICAgICAgICAgICBjYXRlZ29yeTogJycsCiAgLy8gICAgICAgICAgICAgdGl0bGU6ICcnLAogIC8vICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgLy8gICAgICAgICB9LAogIC8vICAgICAgICAgY2F0ZWdvcnlPcHRpb246IFtdLAogIC8vICAgICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UKICAvLyAgICAgfQogIC8vIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBfcmVmKSB7CiAgICB2YXIgZW1pdCA9IF9yZWYuZW1pdCwKICAgICAgICByb290ID0gX3JlZi5yb290LAogICAgICAgIHJlZnMgPSBfcmVmLnJlZnM7CgogICAgLyoqCiAgICAgKiDmlbDmja4KICAgICAqLwogICAgdmFyIGRhdGEgPSByZWFjdGl2ZSh7CiAgICAgIGRpYWxvZ19pbmZvX2ZsYWc6IGZhbHNlLAogICAgICAvLyDlvLnnqpfmoIforrAKICAgICAgZm9ybUxhYmVsV2lkdGg6ICc3MHB4JywKICAgICAgZm9ybTogewogICAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgY29udGVudDogJycKICAgICAgfSwKICAgICAgLy8g5YiG57G75LiL5ouJCiAgICAgIGNhdGVnb3J5T3B0aW9uOiBbXSwKICAgICAgLy8g5oyJ6ZKu5Yqg6L29CiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlCiAgICB9KTsgLy8gd2F0Y2gKCiAgICB3YXRjaChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBkYXRhLmRpYWxvZ19pbmZvX2ZsYWcgPSBwcm9wcy5mbGFnOwogICAgfSk7CiAgICAvKioKICAgICAqIHZ1ZTIuMCBtZXRob2RzCiAgICAgKi8KCiAgICB2YXIgY2xvc2UgPSBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgZGF0YS5kaWFsb2dfaW5mb19mbGFnID0gZmFsc2U7CiAgICAgIHJlc2V0Rm9ybSgpOwogICAgICBlbWl0KCJ1cGRhdGU6ZmxhZyIsIGZhbHNlKTsKICAgIH07CgogICAgdmFyIG9wZW5EaWFsb2cgPSBmdW5jdGlvbiBvcGVuRGlhbG9nKCkgewogICAgICBkYXRhLmNhdGVnb3J5T3B0aW9uID0gcHJvcHMuY2F0ZWdvcnk7CiAgICAgIGdldEluZm8oKTsKICAgIH07CgogICAgdmFyIGdldEluZm8gPSBmdW5jdGlvbiBnZXRJbmZvKCkgewogICAgICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICBwYWdlU2l6ZTogMSwKICAgICAgICBpZDogcHJvcHMuaWQKICAgICAgfTsKICAgICAgR2V0TGlzdChyZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGFbMF07CiAgICAgICAgZGF0YS5mb3JtID0gewogICAgICAgICAgY2F0ZWdvcnk6IHJlc3BvbnNlRGF0YS5jYXRlZ29yeUlkLAogICAgICAgICAgdGl0bGU6IHJlc3BvbnNlRGF0YS50aXRsZSwKICAgICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlRGF0YS5jb250ZW50CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9OwoKICAgIHZhciByZXNldEZvcm0gPSBmdW5jdGlvbiByZXNldEZvcm0oKSB7CiAgICAgIHJlZnMuYWRkSW5mb0Zvcm0ucmVzZXRGaWVsZHMoKTsgLy8gZGF0YS5mb3JtLmNhdGVnb3J5ID0gJycKICAgICAgLy8gZGF0YS5mb3JtLnRpdGxlID0gJycKICAgICAgLy8gZGF0YS5mb3JtLmNvbnRlbnQgPSAnJwogICAgfTsKCiAgICB2YXIgc3VibWl0ID0gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgaWQ6IHByb3BzLmlkLAogICAgICAgIGNhdGVnb3J5SWQ6IGRhdGEuZm9ybS5jYXRlZ29yeSwKICAgICAgICB0aXRsZTogZGF0YS5mb3JtLnRpdGxlLAogICAgICAgIGNvbnRlbnQ6IGRhdGEuZm9ybS5jb250ZW50CiAgICAgIH07CgogICAgICBpZiAoIWRhdGEuZm9ybS5jYXRlZ29yeSkgewogICAgICAgIHJvb3QuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+WIhuexu+S4jeiDveS4uuepuu+8ge+8gScsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwogICAgICBFZGl0SW5mbyhyZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICByb290LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgICAgZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgLyoqCiAgICAgICAgICog5Lik56eN5Yi35paw5pWw5o2u5pa55byPCiAgICAgICAgICogMeOAgeaatOWKm+Wei++8jOebtOaOpeWIt+aWsOaOpeWPowogICAgICAgICAqIDLjgIHov5Tlm57liJfooajvvIzmiYvliqjkv67mlLnmjIflrprnmoTmlbDmja4KICAgICAgICAgKi8KCiAgICAgICAgZW1pdCgiZ2V0TGlzdEVtaXQiKTsgLy8g6YeN572u6KGo5Y2VCiAgICAgICAgLy8gcmVzZXRGb3JtKCkKICAgICAgICAvLyByb290LiRyZWZzWydhZGRJbmZvRm9ybSddLnJlc2V0RmllbGRzKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgZGF0YTogZGF0YSwKICAgICAgLy8gbWV0aG9kcwogICAgICBjbG9zZTogY2xvc2UsCiAgICAgIG9wZW5EaWFsb2c6IG9wZW5EaWFsb2csCiAgICAgIHN1Ym1pdDogc3VibWl0CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,SAAA,OAAA,EAAA,OAAA,EAAA,QAAA,QAAA,YAAA;AACA,SAAA,QAAA,EAAA,GAAA,EAAA,KAAA,QAAA,sBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KALA;AASA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AATA,GAFA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAA,KA9BA,iBA8BA,KA9BA,QA8BA;AAAA,QAAA,IAAA,QAAA,IAAA;AAAA,QAAA,IAAA,QAAA,IAAA;AAAA,QAAA,IAAA,QAAA,IAAA;;AAEA;AACA;AACA;AACA,QAAA,IAAA,GAAA,QAAA,CAAA;AACA,MAAA,gBAAA,EAAA,KADA;AACA;AACA,MAAA,cAAA,EAAA,MAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA;AAHA,OAHA;AAQA;AACA,MAAA,cAAA,EAAA,EATA;AAUA;AACA,MAAA,aAAA,EAAA;AAXA,KAAA,CAAA,CALA,CAkBA;;AACA,IAAA,KAAA,CAAA;AAAA,aAAA,IAAA,CAAA,gBAAA,GAAA,KAAA,CAAA,IAAA;AAAA,KAAA,CAAA;AACA;AACA;AACA;;AACA,QAAA,KAAA,GAAA,SAAA,KAAA,GAAA;AACA,MAAA,IAAA,CAAA,gBAAA,GAAA,KAAA;AACA,MAAA,SAAA;AACA,MAAA,IAAA,CAAA,aAAA,EAAA,KAAA,CAAA;AACA,KAJA;;AAKA,QAAA,UAAA,GAAA,SAAA,UAAA,GAAA;AACA,MAAA,IAAA,CAAA,cAAA,GAAA,KAAA,CAAA,QAAA;AACA,MAAA,OAAA;AACA,KAHA;;AAIA,QAAA,OAAA,GAAA,SAAA,OAAA,GAAA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,UAAA,EAAA,CADA;AAEA,QAAA,QAAA,EAAA,CAFA;AAGA,QAAA,EAAA,EAAA,KAAA,CAAA;AAHA,OAAA;AAKA,MAAA,OAAA,CAAA,WAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,YAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,QAAA,IAAA,CAAA,IAAA,GAAA;AACA,UAAA,QAAA,EAAA,YAAA,CAAA,UADA;AAEA,UAAA,KAAA,EAAA,YAAA,CAAA,KAFA;AAGA,UAAA,OAAA,EAAA,YAAA,CAAA;AAHA,SAAA;AAKA,OAPA;AAQA,KAdA;;AAeA,QAAA,SAAA,GAAA,SAAA,SAAA,GAAA;AACA,MAAA,IAAA,CAAA,WAAA,CAAA,WAAA,GADA,CAEA;AACA;AACA;AACA,KALA;;AAMA,QAAA,MAAA,GAAA,SAAA,MAAA,GAAA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,EAAA,EAAA,KAAA,CAAA,EADA;AAEA,QAAA,UAAA,EAAA,IAAA,CAAA,IAAA,CAAA,QAFA;AAGA,QAAA,KAAA,EAAA,IAAA,CAAA,IAAA,CAAA,KAHA;AAIA,QAAA,OAAA,EAAA,IAAA,CAAA,IAAA,CAAA;AAJA,OAAA;;AAMA,UAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,EAAA;AACA,QAAA,IAAA,CAAA,QAAA,CAAA;AACA,UAAA,OAAA,EAAA,UADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,eAAA,KAAA;AACA;;AACA,MAAA,IAAA,CAAA,aAAA,GAAA,IAAA;AACA,MAAA,QAAA,CAAA,WAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,YAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,IAAA,CAAA,QAAA,CAAA;AACA,UAAA,OAAA,EAAA,YAAA,CAAA,OADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,QAAA,IAAA,CAAA,aAAA,GAAA,KAAA;AACA;AACA;AACA;AACA;AACA;;AACA,QAAA,IAAA,CAAA,aAAA,CAAA,CAZA,CAaA;AACA;AACA;AACA,OAhBA,EAgBA,KAhBA,CAgBA,UAAA,KAAA,EAAA;AACA,QAAA,IAAA,CAAA,aAAA,GAAA,KAAA;AACA,OAlBA;AAmBA,KAlCA;;AAmCA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA;AACA,MAAA,KAAA,EAAA,KAHA;AAGA,MAAA,UAAA,EAAA,UAHA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA;AA3HA,CAAA","sourcesContent":["<template>\n    <el-dialog title=\"修改\" :visible.sync=\"data.dialog_info_flag\" @close=\"close\" width=\"580px\" @opened=\"openDialog\">\n        <el-form :model=\"data.form\" ref=\"addInfoForm\">\n            <el-form-item label=\"类别：\" :label-width=\"data.formLabelWidth\" prop=\"category\">\n                <el-select v-model=\"data.form.category\" placeholder=\"请选择活动区域\">\n                    <el-option \n                    v-for=\"item in data.categoryOption\" \n                    :key=\"item.id\" \n                    :label=\"item.category_name\" \n                    :value=\"item.id\">\n                    </el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"标题：\" :label-width=\"data.formLabelWidth\" prop=\"title\">\n                <el-input v-model=\"data.form.title\" placehoder=\"请输入标题\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"概况：\" :label-width=\"data.formLabelWidth\" prop=\"content\">\n                <el-input type=\"textarea\" v-model=\"data.form.content\" placehoder=\"请输入内容\"></el-input>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"close\">取消</el-button>\n            <el-button type=\"danger\" :loading=\"data.submitLoading\" @click=\"submit\">确定</el-button>\n        </div>\n    </el-dialog>\n</template>\n<script>\nimport { AddInfo, GetList, EditInfo } from \"@/api/news\";\nimport { reactive, ref, watch } from '@vue/composition-api';\nexport default {\n    name: 'dialogInfo',\n    props: {\n        flag: {\n            type: Boolean,\n            default: false\n        },\n        category: {\n            type: Array,\n            default: () => []\n        },\n        id: {\n            type: String,\n            default: \"\"\n        }\n    },\n    // vue2.0\n    // data(){\n    //     return  {\n    //         dialog_info_flag: false,\n    //         formLabelWidth: '70px',\n    //         form: {\n    //             category: '',\n    //             title: '',\n    //             content: ''\n    //         },\n    //         categoryOption: [],\n    //         submitLoading: false\n    //     }\n    // },\n    setup(props, { emit, root, refs }){\n\n        /**\n         * 数据\n         */\n        const data = reactive({\n            dialog_info_flag: false,  // 弹窗标记\n            formLabelWidth: '70px',\n            form: {\n                category: '',\n                title: '',\n                content: ''\n            },\n            // 分类下拉\n            categoryOption: [],\n            // 按钮加载\n            submitLoading: false\n        });\n        // watch\n        watch(() => data.dialog_info_flag = props.flag);\n        /**\n         * vue2.0 methods\n         */\n        const close = () => {\n            data.dialog_info_flag = false;\n            resetForm()\n            emit(\"update:flag\", false);\n        }\n        const openDialog = () => {\n            data.categoryOption = props.category\n            getInfo()\n        }\n        const getInfo = () => {\n            let requestData = {\n                pageNumber: 1,\n                pageSize: 1,\n                id: props.id\n            }\n            GetList(requestData).then(response => {\n                let responseData = response.data.data.data[0]\n                data.form = {\n                    category: responseData.categoryId,\n                    title: responseData.title,\n                    content: responseData.content\n                }\n            })\n        }\n        const resetForm = () => {\n            refs.addInfoForm.resetFields();\n            // data.form.category = ''\n            // data.form.title = ''\n            // data.form.content = ''\n        }\n        const submit = () => {\n            let requestData = {\n                id: props.id,\n                categoryId: data.form.category,\n                title: data.form.title,\n                content: data.form.content,\n            }\n            if(!data.form.category) {\n                root.$message({\n                    message: '分类不能为空！！',\n                    type: 'error'\n                })\n                return false;\n            }\n            data.submitLoading = true\n            EditInfo(requestData).then(response => {\n                let responseData = response.data\n                root.$message({\n                    message: responseData.message,\n                    type: 'success'\n                })\n                data.submitLoading = false\n                /**\n                 * 两种刷新数据方式\n                 * 1、暴力型，直接刷新接口\n                 * 2、返回列表，手动修改指定的数据\n                 */\n                emit(\"getListEmit\");\n                // 重置表单\n                // resetForm()\n                // root.$refs['addInfoForm'].resetFields();\n            }).catch(error => {\n                data.submitLoading = false\n            })\n        }\n        return {\n            data,\n            // methods\n            close, openDialog, submit\n        }\n    }\n}\n</script>\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/Info/dialog"}]}