{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js!/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/detailed.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/detailed.vue","mtime":1614523805942},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgR2V0TGlzdCwgRWRpZEluZm8gfSBmcm9tICJAL2FwaS9uZXdzIjsKaW1wb3J0IHsgdGltZXN0YW1wVG9UaW1lIH0gZnJvbSAiQC91dGlscy9jb21tb24iOwppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCB3YXRjaCwgb25Nb3VudGVkLCBvbkFjdGl2YXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsgLy8g57uE5Lu2CgppbXBvcnQgVXBsb2FkSW1nIGZyb20gIkBjL1VwbG9hZEltZyI7IC8vIOWvjOaWh+acrOe8lui+keWZqAoKaW1wb3J0IHsgcXVpbGxFZGl0b3IgfSBmcm9tICJ2dWUtcXVpbGwtZWRpdG9yIjsKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmNvcmUuY3NzJzsKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLnNub3cuY3NzJzsKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmJ1YmJsZS5jc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZm9EZXRhaWxlZCIsCiAgY29tcG9uZW50czogewogICAgcXVpbGxFZGl0b3I6IHF1aWxsRWRpdG9yLAogICAgVXBsb2FkSW1nOiBVcGxvYWRJbWcKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7CiAgICAvLyDlm77niYfkuIrkvKDphY3nva4KICAgIHZhciB1cGxvYWRJbWdDb25maWcgPSByZWFjdGl2ZSh7CiAgICAgIGFjdGlvbjogImh0dHA6Ly91cC16Mi5xaW5pdXAuY29tIiwKICAgICAgYWNjZXNza2V5OiAiQXZoLUVaWkFhNFR4cVBRWnNFVzQyZlhCVWJUTUZpLVJLU1pUUktKaiIsCiAgICAgIHNlY3JldGtleTogImw5QVh0bmhDVmtaZXhYTlJjbUhYem1lY1hpQ1VpTHlud0dib01lVXciLAogICAgICBidWNrZXR5OiAid2VianNodG1sIgogICAgfSk7CiAgICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgaWQ6IHJvb3QuJHJvdXRlLnBhcmFtcy5pZCB8fCByb290LiRzdG9yZS5nZXR0ZXJzWyJpbmZvRGV0YWlsZWQvaW5mb0lkIl0sCiAgICAgIGNhdGVnb3J5OiBbXSwKICAgICAgZWRpdG9yT3B0aW9uOiB7fSwKICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UKICAgIH0pOwogICAgdmFyIGZvcm0gPSByZWFjdGl2ZSh7CiAgICAgIGNhdGVnb3J5SWQ6ICIiLAogICAgICB0aXRsZTogIiIsCiAgICAgIGNyZWF0ZURhdGU6ICIiLAogICAgICBjb250ZW50OiAiIiwKICAgICAgaW1nVXJsOiAiIgogICAgfSk7CiAgICAvKioKICAgICAgKiDojrflj5bkv6Hmga/liIbnsbsKICAgICAgKi8KCiAgICB2YXIgZ2V0SW5mb0NhdGVnb3J5ID0gZnVuY3Rpb24gZ2V0SW5mb0NhdGVnb3J5KCkgewogICAgICByb290LiRzdG9yZS5kaXNwYXRjaCgnY29tbW9uL2dldEluZm9DYXRlZ29yeScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGF0YS5jYXRlZ29yeSA9IHJlc3BvbnNlOwogICAgICB9KTsKICAgIH07CiAgICAvKioKICAgICAqIOiOt+WPluW9k+WJjUlE55qE5L+h5oGvCiAgICAgKi8KCgogICAgdmFyIGdldEluZm8gPSBmdW5jdGlvbiBnZXRJbmZvKCkgewogICAgICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICBwYWdlU2l6ZTogMSwKICAgICAgICBpZDogZGF0YS5pZAogICAgICB9OwogICAgICBHZXRMaXN0KHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEuZGF0YVswXTsKICAgICAgICBmb3JtLmNhdGVnb3J5SWQgPSByZXNwb25zZURhdGEuY2F0ZWdvcnlJZDsKICAgICAgICBmb3JtLnRpdGxlID0gcmVzcG9uc2VEYXRhLnRpdGxlOwogICAgICAgIGZvcm0uY3JlYXRlRGF0ZSA9IHRpbWVzdGFtcFRvVGltZShyZXNwb25zZURhdGEuY3JlYXRlRGF0ZSk7CiAgICAgICAgZm9ybS5jb250ZW50ID0gcmVzcG9uc2VEYXRhLmNvbnRlbnQ7CiAgICAgICAgZm9ybS5pbWdVcmwgPSByZXNwb25zZURhdGEuaW1nVXJsOwogICAgICB9KTsKICAgIH07CiAgICAvKioKICAgICAqIOS/neWtmO+8iOS/ruaUueaVsOaNruaXtu+8jOW/hemhu+azqOaEj+eahO+8muS4gOWumumcgOimgeS4gOS4qklE77yJCiAgICAgKi8KCgogICAgdmFyIHN1Ym1pdCA9IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIHJlcXVlc3REYXRhID0gewogICAgICAgIGlkOiBkYXRhLmlkLAogICAgICAgIGNhdGVnb3J5SWQ6IGZvcm0uY2F0ZWdvcnlJZCwKICAgICAgICB0aXRsZTogZm9ybS50aXRsZSwKICAgICAgICBjb250ZW50OiBmb3JtLmNvbnRlbnQsCiAgICAgICAgaW1nVXJsOiBmb3JtLmltZ1VybAogICAgICB9OwogICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwogICAgICBFZGlkSW5mbyhyZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICByb290LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgICAgZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH07CgogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0SW5mb0NhdGVnb3J5KCk7CiAgICB9KTsKICAgIG9uQWN0aXZhdGVkKGZ1bmN0aW9uICgpIHsKICAgICAgZGF0YS5pZCA9IHJvb3QuJHJvdXRlLnBhcmFtcy5pZCB8fCByb290LiRzdG9yZS5nZXR0ZXJzWyJpbmZvRGV0YWlsZWQvaW5mb0lkIl07CiAgICAgIGdldEluZm8oKTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgZGF0YTogZGF0YSwKICAgICAgZm9ybTogZm9ybSwKICAgICAgc3VibWl0OiBzdWJtaXQsCiAgICAgIHVwbG9hZEltZ0NvbmZpZzogdXBsb2FkSW1nQ29uZmlnCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["detailed.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n\n    <el-form-item label=\"信息分类：\">\n      <el-select v-model=\"form.categoryId\">\n        <el-option v-for=\"item in data.category\" :key=\"item.id\" :value=\"item.id\" :label=\"item.category_name\"></el-option>\n      </el-select>\n    </el-form-item>\n\n    <el-form-item label=\"新闻标题：\">\n      <el-input v-model=\"form.title\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"缩略图：\">\n      <UploadImg :imgUrl.sync=\"form.imgUrl\" :config=\"uploadImgConfig\" />\n    </el-form-item>\n\n    <el-form-item label=\"发布日期：\">\n      <el-date-picker v-model=\"form.createDate\" type=\"date\" placeholder=\"选择日期\" disabled></el-date-picker>\n    </el-form-item>\n\n    <el-form-item label=\"详细内容：\">\n      <quillEditor v-model=\"form.content\" ref=\"myQuillEditor\" :options=\"data.editorOption\"/>\n    </el-form-item>\n\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submit\" :loading=\"data.submitLoading\">保存</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport { GetList, EdidInfo } from \"@/api/news\";\nimport { timestampToTime } from \"@/utils/common\";\nimport { reactive, ref, watch, onMounted, onActivated } from '@vue/composition-api';\n// 组件\nimport UploadImg from \"@c/UploadImg\"\n// 富文本编辑器\nimport { quillEditor } from \"vue-quill-editor\"; \nimport 'quill/dist/quill.core.css';\nimport 'quill/dist/quill.snow.css';\nimport 'quill/dist/quill.bubble.css';\n\nexport default {\n  name: \"infoDetailed\",\n  components: { quillEditor, UploadImg },\n  setup(props, { root }){\n    // 图片上传配置\n    const uploadImgConfig = reactive({\n      action: \"http://up-z2.qiniup.com\",\n      accesskey: \"Avh-EZZAa4TxqPQZsEW42fXBUbTMFi-RKSZTRKJj\",\n      secretkey: \"l9AXtnhCVkZexXNRcmHXzmecXiCUiLynwGboMeUw\",\n      buckety: \"webjshtml\"\n    });\n\n    const data = reactive({\n      id: root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"],\n      category: [],\n      editorOption: {},\n      submitLoading: false\n    })\n\n    const form = reactive({\n      categoryId: \"\",\n      title: \"\",\n      createDate: \"\",\n      content: \"\",\n      imgUrl: \"\"\n    })\n \n\n    /**\n      * 获取信息分类\n      */\n    const getInfoCategory = () => {\n      root.$store.dispatch('common/getInfoCategory').then(response => {\n        data.category = response\n      })\n    }\n\n    /**\n     * 获取当前ID的信息\n     */\n    const getInfo = () => {\n      let requestData = {\n        pageNumber: 1,\n        pageSize: 1,\n        id: data.id\n      }\n      GetList(requestData).then(response => {\n        let responseData = response.data.data.data[0]\n        form.categoryId = responseData.categoryId;\n        form.title = responseData.title;\n        form.createDate = timestampToTime(responseData.createDate);\n        form.content = responseData.content;\n        form.imgUrl = responseData.imgUrl;\n      })\n    }\n\n    /**\n     * 保存（修改数据时，必须注意的：一定需要一个ID）\n     */\n    const submit = () => {\n      let requestData = {\n        id: data.id,\n        categoryId: form.categoryId,\n        title: form.title,\n        content: form.content,\n        imgUrl: form.imgUrl\n      }\n      data.submitLoading = true\n      EdidInfo(requestData).then(response => {\n        let responseData = response.data\n        root.$message({\n          message: responseData.message,\n          type: 'success'\n        })\n        data.submitLoading = false\n      }).catch(error => {\n          data.submitLoading = false\n      })\n    }\n\n    onMounted(() => {\n      getInfoCategory()\n    })\n\n    onActivated(() => {\n      data.id = root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"];\n      getInfo()\n    })\n\n\n    return {\n      data, form, submit, uploadImgConfig\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>"],"sourceRoot":"src/views/Info"}]}