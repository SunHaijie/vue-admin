{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js!/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/dialog/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/dialog/info.vue","mtime":1614523755442},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQWRkSW5mbyB9IGZyb20gIkAvYXBpL25ld3MiOwppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCB3YXRjaCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkaWFsb2dJbmZvJywKICBwcm9wczogewogICAgZmxhZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGNhdGVnb3J5OiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIC8vIHZ1ZTIuMAogIC8vIGRhdGEoKXsKICAvLyAgICAgcmV0dXJuICB7CiAgLy8gICAgICAgICBkaWFsb2dfaW5mb19mbGFnOiBmYWxzZSwKICAvLyAgICAgICAgIGZvcm1MYWJlbFdpZHRoOiAnNzBweCcsCiAgLy8gICAgICAgICBmb3JtOiB7CiAgLy8gICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLAogIC8vICAgICAgICAgICAgIHRpdGxlOiAnJywKICAvLyAgICAgICAgICAgICBjb250ZW50OiAnJwogIC8vICAgICAgICAgfSwKICAvLyAgICAgICAgIGNhdGVnb3J5T3B0aW9uOiBbXSwKICAvLyAgICAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlCiAgLy8gICAgIH0KICAvLyB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIGVtaXQgPSBfcmVmLmVtaXQsCiAgICAgICAgcm9vdCA9IF9yZWYucm9vdCwKICAgICAgICByZWZzID0gX3JlZi5yZWZzOwoKICAgIC8qKgogICAgICog5pWw5o2uCiAgICAgKi8KICAgIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgICBkaWFsb2dfaW5mb19mbGFnOiBmYWxzZSwKICAgICAgLy8g5by556qX5qCH6K6wCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAnNzBweCcsCiAgICAgIGZvcm06IHsKICAgICAgICBjYXRlZ29yeTogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgIH0sCiAgICAgIC8vIOWIhuexu+S4i+aLiQogICAgICBjYXRlZ29yeU9wdGlvbjogW10sCiAgICAgIC8vIOaMiemSruWKoOi9vQogICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZQogICAgfSk7IC8vIHdhdGNoCgogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZGF0YS5kaWFsb2dfaW5mb19mbGFnID0gcHJvcHMuZmxhZzsKICAgIH0pOwogICAgLyoqCiAgICAgKiB2dWUyLjAgbWV0aG9kcwogICAgICovCgogICAgdmFyIGNsb3NlID0gZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIGRhdGEuZGlhbG9nX2luZm9fZmxhZyA9IGZhbHNlOwogICAgICByZXNldEZvcm0oKTsKICAgICAgZW1pdCgidXBkYXRlOmZsYWciLCBmYWxzZSk7CiAgICB9OwoKICAgIHZhciBvcGVuRGlhbG9nID0gZnVuY3Rpb24gb3BlbkRpYWxvZygpIHsKICAgICAgZGF0YS5jYXRlZ29yeU9wdGlvbiA9IHByb3BzLmNhdGVnb3J5OwogICAgfTsKCiAgICB2YXIgcmVzZXRGb3JtID0gZnVuY3Rpb24gcmVzZXRGb3JtKCkgewogICAgICByZWZzLmFkZEluZm9Gb3JtLnJlc2V0RmllbGRzKCk7IC8vIGRhdGEuZm9ybS5jYXRlZ29yeSA9ICcnCiAgICAgIC8vIGRhdGEuZm9ybS50aXRsZSA9ICcnCiAgICAgIC8vIGRhdGEuZm9ybS5jb250ZW50ID0gJycKICAgIH07CgogICAgdmFyIHN1Ym1pdCA9IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIHJlcXVlc3REYXRhID0gewogICAgICAgIGNhdGVnb3J5OiBkYXRhLmZvcm0uY2F0ZWdvcnksCiAgICAgICAgdGl0bGU6IGRhdGEuZm9ybS50aXRsZSwKICAgICAgICBjb250ZW50OiBkYXRhLmZvcm0uY29udGVudAogICAgICB9OwoKICAgICAgaWYgKCFkYXRhLmZvcm0uY2F0ZWdvcnkpIHsKICAgICAgICByb290LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfliIbnsbvkuI3og73kuLrnqbrvvIHvvIEnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgQWRkSW5mbyhyZXF1ZXN0RGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICByb290LiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgICAgZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7IC8vIOWFs+mXreW8ueeqlwoKICAgICAgICBjbG9zZSgpOyAvLyDlm57osIPniLbnuqfmlbDmja4KCiAgICAgICAgZW1pdCgnZ2V0TGlzdEVtaXQnKTsgLy8gcm9vdC4kcmVmc1snYWRkSW5mb0Zvcm0nXS5yZXNldEZpZWxkcygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IGRhdGEsCiAgICAgIC8vIG1ldGhvZHMKICAgICAgY2xvc2U6IGNsb3NlLAogICAgICBvcGVuRGlhbG9nOiBvcGVuRGlhbG9nLAogICAgICBzdWJtaXQ6IHN1Ym1pdAogICAgfTsKICB9Cn07"},{"version":3,"sources":["info.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-dialog title=\"新增\" :visible.sync=\"data.dialog_info_flag\" @close=\"close\" width=\"580px\" @opened=\"openDialog\">\n        <el-form :model=\"data.form\" ref=\"addInfoForm\">\n            <el-form-item label=\"类别：\" :label-width=\"data.formLabelWidth\" prop=\"category\">\n                <el-select v-model=\"data.form.category\" placeholder=\"请选择活动区域\">\n                    <el-option \n                    v-for=\"item in data.categoryOption\" \n                    :key=\"item.id\" \n                    :label=\"item.category_name\" \n                    :value=\"item.id\">\n                    </el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"标题：\" :label-width=\"data.formLabelWidth\" prop=\"title\">\n                <el-input v-model=\"data.form.title\" placehoder=\"请输入标题\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"概况：\" :label-width=\"data.formLabelWidth\" prop=\"content\">\n                <el-input type=\"textarea\" v-model=\"data.form.content\" placehoder=\"请输入内容\"></el-input>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"close\">取消</el-button>\n            <el-button type=\"danger\" :loading=\"data.submitLoading\" @click=\"submit\">确定</el-button>\n        </div>\n    </el-dialog>\n</template>\n<script>\nimport { AddInfo } from \"@/api/news\";\nimport { reactive, ref, watch } from '@vue/composition-api';\nexport default {\n    name: 'dialogInfo',\n    props: {\n        flag: {\n            type: Boolean,\n            default: false\n        },\n        category: {\n            type: Array,\n            default: () => []\n        }\n    },\n    // vue2.0\n    // data(){\n    //     return  {\n    //         dialog_info_flag: false,\n    //         formLabelWidth: '70px',\n    //         form: {\n    //             category: '',\n    //             title: '',\n    //             content: ''\n    //         },\n    //         categoryOption: [],\n    //         submitLoading: false\n    //     }\n    // },\n    setup(props, { emit, root, refs }){\n        /**\n         * 数据\n         */\n        const data = reactive({\n            dialog_info_flag: false,  // 弹窗标记\n            formLabelWidth: '70px',\n            form: {\n                category: '',\n                title: '',\n                content: ''\n            },\n            // 分类下拉\n            categoryOption: [],\n            // 按钮加载\n            submitLoading: false\n        });\n        // watch\n        watch(() => data.dialog_info_flag = props.flag);\n        /**\n         * vue2.0 methods\n         */\n        const close = () => {\n            data.dialog_info_flag = false;\n            resetForm()\n            emit(\"update:flag\", false);\n        }\n        const openDialog = () => {\n            data.categoryOption = props.category\n        }\n        const resetForm = () => {\n            refs.addInfoForm.resetFields();\n            // data.form.category = ''\n            // data.form.title = ''\n            // data.form.content = ''\n        }\n        const submit = () => {\n            let requestData = {\n                category: data.form.category,\n                title: data.form.title,\n                content: data.form.content,\n            }\n            if(!data.form.category) {\n                root.$message({\n                    message: '分类不能为空！！',\n                    type: 'error'\n                })\n                return false;\n            }\n            data.submitLoading = true\n            AddInfo(requestData).then(response => {\n                let responseData = response.data\n                root.$message({\n                    message: responseData.message,\n                    type: 'success'\n                })\n                data.submitLoading = false\n                // 关闭弹窗\n                close()\n                // 回调父级数据\n                emit('getListEmit');\n                // root.$refs['addInfoForm'].resetFields();\n            }).catch(error => {\n                data.submitLoading = false\n            })\n        }\n        return {\n            data,\n            // methods\n            close, openDialog, submit\n        }\n    }\n}\n</script>\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/Info/dialog"}]}