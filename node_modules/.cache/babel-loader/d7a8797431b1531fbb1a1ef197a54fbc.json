{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js!/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/detailed.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/detailed.vue","mtime":1614739307045},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgR2V0TGlzdCwgRWRpZEluZm8gfSBmcm9tICJAL2FwaS9uZXdzIjsKaW1wb3J0IHsgdGltZXN0YW1wVG9UaW1lIH0gZnJvbSAiQC91dGlscy9jb21tb24iOwppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCB3YXRjaCwgb25Nb3VudGVkLCBvbkFjdGl2YXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsgLy8g57uE5Lu2CgppbXBvcnQgVXBsb2FkSW1nIGZyb20gIkBjL1VwbG9hZEltZyI7IC8vIOWvjOaWh+acrOe8lui+keWZqAoKaW1wb3J0IHsgcXVpbGxFZGl0b3IgfSBmcm9tICJ2dWUtcXVpbGwtZWRpdG9yIjsKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmNvcmUuY3NzJzsKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLnNub3cuY3NzJzsKaW1wb3J0ICdxdWlsbC9kaXN0L3F1aWxsLmJ1YmJsZS5jc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZm9EZXRhaWxlZCIsCiAgY29tcG9uZW50czogewogICAgcXVpbGxFZGl0b3I6IHF1aWxsRWRpdG9yLAogICAgVXBsb2FkSW1nOiBVcGxvYWRJbWcKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7CiAgICAvLyDlm77niYfkuIrkvKDphY3nva4KICAgIHZhciB1cGxvYWRJbWdDb25maWcgPSByZWFjdGl2ZSh7CiAgICAgIGFjdGlvbjogImh0dHA6Ly91cC16Mi5xaW5pdXAuY29tIiwKICAgICAgYWNjZXNza2V5OiAidGxNVEZCcGpDTXJGS21IbmY2NjRVcFIzd1I2ZHdIQVQ1U0NocFpkIiwKICAgICAgc2VjcmV0a2V5OiAidHlvODdLdjdhQ090Y05Ec1pfR2kxSURfbjJCTGVOUXJzT1RNOUtydSIsCiAgICAgIGJ1Y2tldHk6ICJpbmRleGh0bWwiCiAgICB9KTsKICAgIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgICBpZDogcm9vdC4kcm91dGUucGFyYW1zLmlkIHx8IHJvb3QuJHN0b3JlLmdldHRlcnNbImluZm9EZXRhaWxlZC9pbmZvSWQiXSwKICAgICAgY2F0ZWdvcnk6IFtdLAogICAgICBlZGl0b3JPcHRpb246IHt9LAogICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZQogICAgfSk7CiAgICB2YXIgZm9ybSA9IHJlYWN0aXZlKHsKICAgICAgY2F0ZWdvcnlJZDogIiIsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY3JlYXRlRGF0ZTogIiIsCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBpbWdVcmw6ICIiCiAgICB9KTsKICAgIC8qKgogICAgICAqIOiOt+WPluS/oeaBr+WIhuexuwogICAgICAqLwoKICAgIHZhciBnZXRJbmZvQ2F0ZWdvcnkgPSBmdW5jdGlvbiBnZXRJbmZvQ2F0ZWdvcnkoKSB7CiAgICAgIHJvb3QuJHN0b3JlLmRpc3BhdGNoKCdjb21tb24vZ2V0SW5mb0NhdGVnb3J5JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBkYXRhLmNhdGVnb3J5ID0gcmVzcG9uc2U7CiAgICAgIH0pOwogICAgfTsKICAgIC8qKgogICAgICog6I635Y+W5b2T5YmNSUTnmoTkv6Hmga8KICAgICAqLwoKCiAgICB2YXIgZ2V0SW5mbyA9IGZ1bmN0aW9uIGdldEluZm8oKSB7CiAgICAgIHZhciByZXF1ZXN0RGF0YSA9IHsKICAgICAgICBwYWdlTnVtYmVyOiAxLAogICAgICAgIHBhZ2VTaXplOiAxLAogICAgICAgIGlkOiBkYXRhLmlkCiAgICAgIH07CiAgICAgIEdldExpc3QocmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5kYXRhWzBdOwogICAgICAgIGZvcm0uY2F0ZWdvcnlJZCA9IHJlc3BvbnNlRGF0YS5jYXRlZ29yeUlkOwogICAgICAgIGZvcm0udGl0bGUgPSByZXNwb25zZURhdGEudGl0bGU7CiAgICAgICAgZm9ybS5jcmVhdGVEYXRlID0gdGltZXN0YW1wVG9UaW1lKHJlc3BvbnNlRGF0YS5jcmVhdGVEYXRlKTsKICAgICAgICBmb3JtLmNvbnRlbnQgPSByZXNwb25zZURhdGEuY29udGVudDsKICAgICAgICBmb3JtLmltZ1VybCA9IHJlc3BvbnNlRGF0YS5pbWdVcmw7CiAgICAgIH0pOwogICAgfTsKICAgIC8qKgogICAgICog5L+d5a2Y77yI5L+u5pS55pWw5o2u5pe277yM5b+F6aG75rOo5oSP55qE77ya5LiA5a6a6ZyA6KaB5LiA5LiqSUTvvIkKICAgICAqLwoKCiAgICB2YXIgc3VibWl0ID0gZnVuY3Rpb24gc3VibWl0KCkgewogICAgICB2YXIgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgaWQ6IGRhdGEuaWQsCiAgICAgICAgY2F0ZWdvcnlJZDogZm9ybS5jYXRlZ29yeUlkLAogICAgICAgIHRpdGxlOiBmb3JtLnRpdGxlLAogICAgICAgIGNvbnRlbnQ6IGZvcm0uY29udGVudCwKICAgICAgICBpbWdVcmw6IGZvcm0uaW1nVXJsCiAgICAgIH07CiAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IHRydWU7CiAgICAgIEVkaWRJbmZvKHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHJvb3QuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2VEYXRhLm1lc3NhZ2UsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgZGF0YS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfTsKCiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBnZXRJbmZvQ2F0ZWdvcnkoKTsKICAgIH0pOwogICAgb25BY3RpdmF0ZWQoZnVuY3Rpb24gKCkgewogICAgICBkYXRhLmlkID0gcm9vdC4kcm91dGUucGFyYW1zLmlkIHx8IHJvb3QuJHN0b3JlLmdldHRlcnNbImluZm9EZXRhaWxlZC9pbmZvSWQiXTsKICAgICAgZ2V0SW5mbygpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBkYXRhOiBkYXRhLAogICAgICBmb3JtOiBmb3JtLAogICAgICBzdWJtaXQ6IHN1Ym1pdCwKICAgICAgdXBsb2FkSW1nQ29uZmlnOiB1cGxvYWRJbWdDb25maWcKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["detailed.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n\n    <el-form-item label=\"信息分类：\">\n      <el-select v-model=\"form.categoryId\">\n        <el-option v-for=\"item in data.category\" :key=\"item.id\" :value=\"item.id\" :label=\"item.category_name\"></el-option>\n      </el-select>\n    </el-form-item>\n\n    <el-form-item label=\"新闻标题：\">\n      <el-input v-model=\"form.title\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"缩略图：\">\n      <UploadImg :imgUrl.sync=\"form.imgUrl\" :config=\"uploadImgConfig\" />\n    </el-form-item>\n\n    <el-form-item label=\"发布日期：\">\n      <el-date-picker v-model=\"form.createDate\" type=\"date\" placeholder=\"选择日期\" disabled></el-date-picker>\n    </el-form-item>\n\n    <el-form-item label=\"详细内容：\">\n      <quillEditor v-model=\"form.content\" ref=\"myQuillEditor\" :options=\"data.editorOption\"/>\n    </el-form-item>\n\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submit\" :loading=\"data.submitLoading\">保存</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport { GetList, EdidInfo } from \"@/api/news\";\nimport { timestampToTime } from \"@/utils/common\";\nimport { reactive, ref, watch, onMounted, onActivated } from '@vue/composition-api';\n// 组件\nimport UploadImg from \"@c/UploadImg\"\n// 富文本编辑器\nimport { quillEditor } from \"vue-quill-editor\"; \nimport 'quill/dist/quill.core.css';\nimport 'quill/dist/quill.snow.css';\nimport 'quill/dist/quill.bubble.css';\n\nexport default {\n  name: \"infoDetailed\",\n  components: { quillEditor, UploadImg },\n  setup(props, { root }){\n    // 图片上传配置\n    const uploadImgConfig = reactive({\n      action: \"http://up-z2.qiniup.com\",\n      accesskey: \"tlMTFBpjCMrFKmHnf664UpR3wR6dwHAT5SChpZd\",\n      secretkey: \"tyo87Kv7aCOtcNDsZ_Gi1ID_n2BLeNQrsOTM9Kru\",\n      buckety: \"indexhtml\"\n    });\n\n    const data = reactive({\n      id: root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"],\n      category: [],\n      editorOption: {},\n      submitLoading: false\n    })\n\n    const form = reactive({\n      categoryId: \"\",\n      title: \"\",\n      createDate: \"\",\n      content: \"\",\n      imgUrl: \"\"\n    })\n \n\n    /**\n      * 获取信息分类\n      */\n    const getInfoCategory = () => {\n      root.$store.dispatch('common/getInfoCategory').then(response => {\n        data.category = response\n      })\n    }\n\n    /**\n     * 获取当前ID的信息\n     */\n    const getInfo = () => {\n      let requestData = {\n        pageNumber: 1,\n        pageSize: 1,\n        id: data.id\n      }\n      GetList(requestData).then(response => {\n        let responseData = response.data.data.data[0]\n        form.categoryId = responseData.categoryId;\n        form.title = responseData.title;\n        form.createDate = timestampToTime(responseData.createDate);\n        form.content = responseData.content;\n        form.imgUrl = responseData.imgUrl;\n      })\n    }\n\n    /**\n     * 保存（修改数据时，必须注意的：一定需要一个ID）\n     */\n    const submit = () => {\n      let requestData = {\n        id: data.id,\n        categoryId: form.categoryId,\n        title: form.title,\n        content: form.content,\n        imgUrl: form.imgUrl\n      }\n      data.submitLoading = true\n      EdidInfo(requestData).then(response => {\n        let responseData = response.data\n        root.$message({\n          message: responseData.message,\n          type: 'success'\n        })\n        data.submitLoading = false\n      }).catch(error => {\n          data.submitLoading = false\n      })\n    }\n\n    onMounted(() => {\n      getInfoCategory()\n    })\n\n    onActivated(() => {\n      data.id = root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"];\n      getInfo()\n    })\n\n\n    return {\n      data, form, submit, uploadImgConfig\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>"],"sourceRoot":"src/views/Info"}]}