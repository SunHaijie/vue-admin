{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/components/Table/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/components/Table/index.vue","mtime":1614522532105},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlYWN0aXZlLCBvbkJlZm9yZU1vdW50LCBvbk1vdW50ZWQsIHdhdGNoIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBsb2FkRGF0YSB9IGZyb20gIi4vdGFibGVMb2FkRGF0YSI7CmltcG9ydCB7IHBhZ2luYXRpb25Ib29rIH0gZnJvbSAiLi9wYWdpbmF0aW9uSG9vayIKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogInRhYmxlVnVlIiwKICAgIHByb3BzOiB7CiAgICAgICAgY29uZmlnOiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge30KICAgICAgICB9LAogICAgICAgIHRhYmxlUm93OiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge30KICAgICAgICB9CiAgICB9LAogICAgc2V0dXAocHJvcHMsIHsgcm9vdCwgZW1pdCB9KXsKICAgICAgICAvLyDliqDovb3mlbDmja4KICAgICAgICBjb25zdCB7IHRhYmxlRGF0YSwgdGFibGVMb2FkRGF0YSB9ID0gbG9hZERhdGEoeyByb290IH0pOwogICAgICAgIC8vIOmhteeggQogICAgICAgIGNvbnN0IHsgcGFnZURhdGEsIGhhbmRsZVNpemVDaGFuZ2UsIGhhbmRsZUN1cnJlbnRDaGFuZ2UsIHRvdGFsQ291bnQgfSA9IHBhZ2luYXRpb25Ib29rKCk7CiAgICAgICAgLy8g57uE5Lu25Y+Y6YePCiAgICAgICAgY29uc3QgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgICAgICAgdGFibGVDb25maWc6IHsKICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogdHJ1ZSwKICAgICAgICAgICAgICAgIHJlY29yZENoZWNrYm94OiBmYWxzZSwKICAgICAgICAgICAgICAgIHJlcXVlc3REYXRhOiB7fSwKICAgICAgICAgICAgICAgIHRIZWFkOiBbXSwKICAgICAgICAgICAgICAgIHBhZ2luYXRpb25MYXlvdXQ6ICJ0b3RhbCwgc2l6ZXMsIHByZXYsIHBhZ2VyLCBuZXh0LCBqdW1wZXIiLAogICAgICAgICAgICAgICAgcGFnaW5hdGlvblNob3c6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGFibGVEYXRhOiBbXQogICAgICAgIH0pOwogICAgICAgIC8qKgogICAgICAgICAqIHZ1ZTMuMCDkuJrliqHpgLvovpHnmoTmipjliIblj4rnu4TlkIjvvIzov5jmnInlpI3nlKjmgKcKICAgICAgICAgKi8KICAgICAgICAvLyDmlbDmja7muLLmn5MKICAgICAgICB3YXRjaChbCiAgICAgICAgICAgICgpID0+IHRhYmxlRGF0YS5pdGVtLAogICAgICAgICAgICAoKSA9PiB0YWJsZURhdGEudG90YWwKICAgICAgICBdLCAoW3RhYmxlRGF0YSwgdG90YWxdKSA9PiB7CiAgICAgICAgICAgIGRhdGEudGFibGVEYXRhID0gdGFibGVEYXRhOwogICAgICAgICAgICB0b3RhbENvdW50KHRvdGFsKTsKICAgICAgICB9KTsKICAgICAgICAvLyDpobXnoIHnm5HlkKwKICAgICAgICB3YXRjaChbCiAgICAgICAgICAgICgpID0+IHBhZ2VEYXRhLmN1cnJlbnRQYWdlLAogICAgICAgICAgICAoKSA9PiBwYWdlRGF0YS5wYWdlU2l6ZQogICAgICAgIF0sIChbY3VycmVudFBhZ2UsIHBhZ2VTaXplXSkgPT4gewogICAgICAgICAgICBsZXQgcmVxdWVzdERhdGEgPSBkYXRhLnRhYmxlQ29uZmlnLnJlcXVlc3REYXRhOwogICAgICAgICAgICBpZihyZXF1ZXN0RGF0YS5kYXRhKSB7CiAgICAgICAgICAgICAgICByZXF1ZXN0RGF0YS5kYXRhLnBhZ2VOdW1iZXIgPSBjdXJyZW50UGFnZTsKICAgICAgICAgICAgICAgIHJlcXVlc3REYXRhLmRhdGEucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgICAgICAgICAgIHRhYmxlTG9hZERhdGEoZGF0YS50YWJsZUNvbmZpZy5yZXF1ZXN0RGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC8qKgogICAgICAgICAqIOaWueazlSBtZWh0b2RzCiAgICAgICAgICovCiAgICAgICAgLy8g5Yid5aeL5YyWdGFibGXphY3nva7pobkgLy8gY29uc3Tlo7DmmI7lr7nosaHmiJYg5pWw57uECiAgICAgICAgLy8g5Yy56YWN55u45ZCM55qEa2V577yM5aaC5p6c5a2Y5Zyo77yM5YiZ5pu/5o2iCiAgICAgICAgY29uc3QgaW5pdFRhYmxlQ29uZmlnID0gKCkgPT4gewogICAgICAgICAgICBsZXQgY29uZmlnRGF0YSA9IHByb3BzLmNvbmZpZzsKICAgICAgICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhLnRhYmxlQ29uZmlnKTsKICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gY29uZmlnRGF0YSkgewogICAgICAgICAgICAgICAgaWYoa2V5cy5pbmNsdWRlcyhrZXkpKXsgIC8vIMKgWyJzZWxlY3Rpb24iLCAicmVjb3JkQ2hlY2tib3giLCAicmVxdWVzdFVybCIsICJ0SGVhZCJdLmluY2x1ZGVzKCJzZWxlY3Rpb24iKQogICAgICAgICAgICAgICAgICAgIGRhdGEudGFibGVDb25maWdba2V5XSA9IGNvbmZpZ0RhdGFba2V5XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDli77pgIljaGVja2JveOaXtuinpuWPkQogICAgICAgIGNvbnN0IHRoYXRTZWxlY3RDaGVja2JveCA9ICh2YWwpID0+IHsKICAgICAgICAgICAgbGV0IHJvd0RhdGEgPSB7CiAgICAgICAgICAgICAgICBpZEl0ZW06IHZhbC5tYXAoaXRlbSA9PiBpdGVtLmlkKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVtaXQoInVwZGF0ZTp0YWJsZVJvdyIsIHJvd0RhdGEpOwogICAgICAgIH0KICAgICAgICAvLyDliLfmlrDmlbDmja4KICAgICAgICBjb25zdCByZWZyZXNoRGF0YSA9ICgpID0+IHsKICAgICAgICAgICAgdGFibGVMb2FkRGF0YShkYXRhLnRhYmxlQ29uZmlnLnJlcXVlc3REYXRhKTsKICAgICAgICB9CiAgICAgICAgLy8g5bim5Y+C5pWw5Yi35paw5pWw5o2uCiAgICAgICAgY29uc3QgcGFyYW1zTG9hZERhdGEgPSAocGFyYW1zKSA9PiB7CiAgICAgICAgICAgIGxldCByZXF1ZXN0RGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywgewogICAgICAgICAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAxMAogICAgICAgICAgICB9KQogICAgICAgICAgICBkYXRhLnRhYmxlQ29uZmlnLnJlcXVlc3REYXRhLmRhdGEgPSByZXF1ZXN0RGF0YQogICAgICAgICAgICB0YWJsZUxvYWREYXRhKGRhdGEudGFibGVDb25maWcucmVxdWVzdERhdGEpOwogICAgICAgIH0KCiAgICAgICAgb25CZWZvcmVNb3VudCgoKSA9PiB7CiAgICAgICAgICAgIGluaXRUYWJsZUNvbmZpZygpOwogICAgICAgICAgICB0YWJsZUxvYWREYXRhKGRhdGEudGFibGVDb25maWcucmVxdWVzdERhdGEpOwogICAgICAgIH0pCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGEsIHBhZ2VEYXRhLCAKICAgICAgICAgICAgaGFuZGxlU2l6ZUNoYW5nZSwgaGFuZGxlQ3VycmVudENoYW5nZSwgdGhhdFNlbGVjdENoZWNrYm94LCByZWZyZXNoRGF0YSwgcGFyYW1zTG9hZERhdGEKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Table","sourcesContent":["<template>\n  <div>\n    <el-table :data=\"data.tableData\" border style=\"width: 100%\" @selection-change=\"thatSelectCheckbox\">\n      <!--多选框-->\n      <el-table-column v-if=\"data.tableConfig.selection\" type=\"selection\" width=\"55\"></el-table-column>\n      <template v-for=\"item in data.tableConfig.tHead\">\n        <!--v-slot-->\n        <el-table-column\n          :key=\"item.field\"\n          :prop=\"item.field\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          v-if=\"item.columnType === 'slot'\"\n        >\n          <template slot-scope=\"scope\">\n            <slot :name=\"item.slotName\" :data=\"scope.row\"></slot>\n          </template>\n        </el-table-column>\n        <!--文本数据渲染-->\n        <el-table-column\n          :key=\"item.field\"\n          :prop=\"item.field\"\n          :label=\"item.label\"\n          :width=\"item.width\"\n          v-else\n        ></el-table-column>\n      </template>\n    </el-table>\n    <div class=\"table-footer\">\n        <el-row>\n            <el-col :span=\"4\">\n                <slot name=\"tableFooterLeft\"></slot>\n            </el-col>\n            <el-col :span=\"20\">\n                <el-pagination\n                    class=\"pull-right\"\n                    v-if=\"data.tableConfig.paginationShow\"\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    :current-page=\"pageData.currentPage\"\n                    :page-sizes=\"pageData.pageSizes\"\n                    :page-size=\"pageData.pageSize\"\n                    :layout=\"data.tableConfig.paginationLayout\"\n                    :total=\"pageData.total\"\n                    background\n                ></el-pagination>\n            </el-col>\n        </el-row>\n    </div>\n    \n  </div>\n</template>\n<script>\nimport { reactive, onBeforeMount, onMounted, watch } from '@vue/composition-api';\nimport { loadData } from \"./tableLoadData\";\nimport { paginationHook } from \"./paginationHook\"\nexport default {\n    name: \"tableVue\",\n    props: {\n        config: {\n            type: Object,\n            default: () => {}\n        },\n        tableRow: {\n            type: Object,\n            default: () => {}\n        }\n    },\n    setup(props, { root, emit }){\n        // 加载数据\n        const { tableData, tableLoadData } = loadData({ root });\n        // 页码\n        const { pageData, handleSizeChange, handleCurrentChange, totalCount } = paginationHook();\n        // 组件变量\n        const data = reactive({\n            tableConfig: {\n                selection: true,\n                recordCheckbox: false,\n                requestData: {},\n                tHead: [],\n                paginationLayout: \"total, sizes, prev, pager, next, jumper\",\n                paginationShow: true\n            },\n            tableData: []\n        });\n        /**\n         * vue3.0 业务逻辑的折分及组合，还有复用性\n         */\n        // 数据渲染\n        watch([\n            () => tableData.item,\n            () => tableData.total\n        ], ([tableData, total]) => {\n            data.tableData = tableData;\n            totalCount(total);\n        });\n        // 页码监听\n        watch([\n            () => pageData.currentPage,\n            () => pageData.pageSize\n        ], ([currentPage, pageSize]) => {\n            let requestData = data.tableConfig.requestData;\n            if(requestData.data) {\n                requestData.data.pageNumber = currentPage;\n                requestData.data.pageSize = pageSize;\n                tableLoadData(data.tableConfig.requestData);\n            }\n        })\n        /**\n         * 方法 mehtods\n         */\n        // 初始化table配置项 // const声明对象或 数组\n        // 匹配相同的key，如果存在，则替换\n        const initTableConfig = () => {\n            let configData = props.config;\n            let keys = Object.keys(data.tableConfig);\n            for(let key in configData) {\n                if(keys.includes(key)){  //  [\"selection\", \"recordCheckbox\", \"requestUrl\", \"tHead\"].includes(\"selection\")\n                    data.tableConfig[key] = configData[key];\n                }\n            }\n        }\n        // 勾选checkbox时触发\n        const thatSelectCheckbox = (val) => {\n            let rowData = {\n                idItem: val.map(item => item.id)\n            }\n            emit(\"update:tableRow\", rowData);\n        }\n        // 刷新数据\n        const refreshData = () => {\n            tableLoadData(data.tableConfig.requestData);\n        }\n        // 带参数刷新数据\n        const paramsLoadData = (params) => {\n            let requestData = Object.assign({}, params, {\n                pageNumber: 1,\n                pageSize: 10\n            })\n            data.tableConfig.requestData.data = requestData\n            tableLoadData(data.tableConfig.requestData);\n        }\n\n        onBeforeMount(() => {\n            initTableConfig();\n            tableLoadData(data.tableConfig.requestData);\n        })\n\n        return {\n            data, pageData, \n            handleSizeChange, handleCurrentChange, thatSelectCheckbox, refreshData, paramsLoadData\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.table-footer { padding: 15px 0; }\n</style>\n\n<!--\n初始化的数据，不需要监听，\n可以在挂载之前预先处理。\n-->\n\n<!--\nv-slot插槽：父组件传内容到子组件显示\n1、匿名插槽：没有指定某一个插槽，全部都显示\n2、具名插槽：指定插槽显示内容\n3、作用域插槽：可以进行数据绑定，父子组件通讯\n-->"]}]}