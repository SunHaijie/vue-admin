{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/dialog/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/dialog/edit.vue","mtime":1614523737162},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFkZEluZm8sIEdldExpc3QsIEVkaWRJbmZvIH0gZnJvbSAiQC9hcGkvbmV3cyI7CmltcG9ydCB7IHJlYWN0aXZlLCByZWYsIHdhdGNoIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnZGlhbG9nSW5mbycsCiAgICBwcm9wczogewogICAgICAgIGZsYWc6IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgICAgICB9LAogICAgICAgIGNhdGVnb3J5OiB7CiAgICAgICAgICAgIHR5cGU6IEFycmF5LAogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgICAgIH0sCiAgICAgICAgaWQ6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAiIgogICAgICAgIH0KICAgIH0sCiAgICAvLyB2dWUyLjAKICAgIC8vIGRhdGEoKXsKICAgIC8vICAgICByZXR1cm4gIHsKICAgIC8vICAgICAgICAgZGlhbG9nX2luZm9fZmxhZzogZmFsc2UsCiAgICAvLyAgICAgICAgIGZvcm1MYWJlbFdpZHRoOiAnNzBweCcsCiAgICAvLyAgICAgICAgIGZvcm06IHsKICAgIC8vICAgICAgICAgICAgIGNhdGVnb3J5OiAnJywKICAgIC8vICAgICAgICAgICAgIHRpdGxlOiAnJywKICAgIC8vICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgICAvLyAgICAgICAgIH0sCiAgICAvLyAgICAgICAgIGNhdGVnb3J5T3B0aW9uOiBbXSwKICAgIC8vICAgICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UKICAgIC8vICAgICB9CiAgICAvLyB9LAogICAgc2V0dXAocHJvcHMsIHsgZW1pdCwgcm9vdCwgcmVmcyB9KXsKCiAgICAgICAgLyoqCiAgICAgICAgICog5pWw5o2uCiAgICAgICAgICovCiAgICAgICAgY29uc3QgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgICAgICAgZGlhbG9nX2luZm9fZmxhZzogZmFsc2UsICAvLyDlvLnnqpfmoIforrAKICAgICAgICAgICAgZm9ybUxhYmVsV2lkdGg6ICc3MHB4JywKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLAogICAgICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICAgICAgY29udGVudDogJycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5YiG57G75LiL5ouJCiAgICAgICAgICAgIGNhdGVnb3J5T3B0aW9uOiBbXSwKICAgICAgICAgICAgLy8g5oyJ6ZKu5Yqg6L29CiAgICAgICAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgLy8gd2F0Y2gKICAgICAgICB3YXRjaCgoKSA9PiBkYXRhLmRpYWxvZ19pbmZvX2ZsYWcgPSBwcm9wcy5mbGFnKTsKICAgICAgICAvKioKICAgICAgICAgKiB2dWUyLjAgbWV0aG9kcwogICAgICAgICAqLwogICAgICAgIGNvbnN0IGNsb3NlID0gKCkgPT4gewogICAgICAgICAgICBkYXRhLmRpYWxvZ19pbmZvX2ZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgcmVzZXRGb3JtKCkKICAgICAgICAgICAgZW1pdCgidXBkYXRlOmZsYWciLCBmYWxzZSk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IG9wZW5EaWFsb2cgPSAoKSA9PiB7CiAgICAgICAgICAgIGRhdGEuY2F0ZWdvcnlPcHRpb24gPSBwcm9wcy5jYXRlZ29yeQogICAgICAgICAgICBnZXRJbmZvKCkKICAgICAgICB9CiAgICAgICAgY29uc3QgZ2V0SW5mbyA9ICgpID0+IHsKICAgICAgICAgICAgbGV0IHJlcXVlc3REYXRhID0gewogICAgICAgICAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAxLAogICAgICAgICAgICAgICAgaWQ6IHByb3BzLmlkCiAgICAgICAgICAgIH0KICAgICAgICAgICAgR2V0TGlzdChyZXF1ZXN0RGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGFbMF0KICAgICAgICAgICAgICAgIGRhdGEuZm9ybSA9IHsKICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogcmVzcG9uc2VEYXRhLmNhdGVnb3J5SWQsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlRGF0YS50aXRsZSwKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiByZXNwb25zZURhdGEuY29udGVudAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBjb25zdCByZXNldEZvcm0gPSAoKSA9PiB7CiAgICAgICAgICAgIHJlZnMuYWRkSW5mb0Zvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgICAgICAgLy8gZGF0YS5mb3JtLmNhdGVnb3J5ID0gJycKICAgICAgICAgICAgLy8gZGF0YS5mb3JtLnRpdGxlID0gJycKICAgICAgICAgICAgLy8gZGF0YS5mb3JtLmNvbnRlbnQgPSAnJwogICAgICAgIH0KICAgICAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgICAgICAgIGxldCByZXF1ZXN0RGF0YSA9IHsKICAgICAgICAgICAgICAgIGlkOiBwcm9wcy5pZCwKICAgICAgICAgICAgICAgIGNhdGVnb3J5SWQ6IGRhdGEuZm9ybS5jYXRlZ29yeSwKICAgICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmZvcm0udGl0bGUsCiAgICAgICAgICAgICAgICBjb250ZW50OiBkYXRhLmZvcm0uY29udGVudCwKICAgICAgICAgICAgfQogICAgICAgICAgICBpZighZGF0YS5mb3JtLmNhdGVnb3J5KSB7CiAgICAgICAgICAgICAgICByb290LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5YiG57G75LiN6IO95Li656m677yB77yBJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IHRydWUKICAgICAgICAgICAgRWRpZEluZm8ocmVxdWVzdERhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgICAgIHJvb3QuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIOS4pOenjeWIt+aWsOaVsOaNruaWueW8jwogICAgICAgICAgICAgICAgICogMeOAgeaatOWKm+Wei++8jOebtOaOpeWIt+aWsOaOpeWPowogICAgICAgICAgICAgICAgICogMuOAgei/lOWbnuWIl+ihqO+8jOaJi+WKqOS/ruaUueaMh+WumueahOaVsOaNrgogICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICBlbWl0KCJnZXRMaXN0RW1pdCIpOwogICAgICAgICAgICAgICAgLy8g6YeN572u6KGo5Y2VCiAgICAgICAgICAgICAgICAvLyByZXNldEZvcm0oKQogICAgICAgICAgICAgICAgLy8gcm9vdC4kcmVmc1snYWRkSW5mb0Zvcm0nXS5yZXNldEZpZWxkcygpOwogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkYXRhLAogICAgICAgICAgICAvLyBtZXRob2RzCiAgICAgICAgICAgIGNsb3NlLCBvcGVuRGlhbG9nLCBzdWJtaXQKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/Info/dialog","sourcesContent":["<template>\n    <el-dialog title=\"修改\" :visible.sync=\"data.dialog_info_flag\" @close=\"close\" width=\"580px\" @opened=\"openDialog\">\n        <el-form :model=\"data.form\" ref=\"addInfoForm\">\n            <el-form-item label=\"类别：\" :label-width=\"data.formLabelWidth\" prop=\"category\">\n                <el-select v-model=\"data.form.category\" placeholder=\"请选择活动区域\">\n                    <el-option \n                    v-for=\"item in data.categoryOption\" \n                    :key=\"item.id\" \n                    :label=\"item.category_name\" \n                    :value=\"item.id\">\n                    </el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"标题：\" :label-width=\"data.formLabelWidth\" prop=\"title\">\n                <el-input v-model=\"data.form.title\" placehoder=\"请输入标题\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"概况：\" :label-width=\"data.formLabelWidth\" prop=\"content\">\n                <el-input type=\"textarea\" v-model=\"data.form.content\" placehoder=\"请输入内容\"></el-input>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"close\">取消</el-button>\n            <el-button type=\"danger\" :loading=\"data.submitLoading\" @click=\"submit\">确定</el-button>\n        </div>\n    </el-dialog>\n</template>\n<script>\nimport { AddInfo, GetList, EdidInfo } from \"@/api/news\";\nimport { reactive, ref, watch } from '@vue/composition-api';\nexport default {\n    name: 'dialogInfo',\n    props: {\n        flag: {\n            type: Boolean,\n            default: false\n        },\n        category: {\n            type: Array,\n            default: () => []\n        },\n        id: {\n            type: String,\n            default: \"\"\n        }\n    },\n    // vue2.0\n    // data(){\n    //     return  {\n    //         dialog_info_flag: false,\n    //         formLabelWidth: '70px',\n    //         form: {\n    //             category: '',\n    //             title: '',\n    //             content: ''\n    //         },\n    //         categoryOption: [],\n    //         submitLoading: false\n    //     }\n    // },\n    setup(props, { emit, root, refs }){\n\n        /**\n         * 数据\n         */\n        const data = reactive({\n            dialog_info_flag: false,  // 弹窗标记\n            formLabelWidth: '70px',\n            form: {\n                category: '',\n                title: '',\n                content: ''\n            },\n            // 分类下拉\n            categoryOption: [],\n            // 按钮加载\n            submitLoading: false\n        });\n        // watch\n        watch(() => data.dialog_info_flag = props.flag);\n        /**\n         * vue2.0 methods\n         */\n        const close = () => {\n            data.dialog_info_flag = false;\n            resetForm()\n            emit(\"update:flag\", false);\n        }\n        const openDialog = () => {\n            data.categoryOption = props.category\n            getInfo()\n        }\n        const getInfo = () => {\n            let requestData = {\n                pageNumber: 1,\n                pageSize: 1,\n                id: props.id\n            }\n            GetList(requestData).then(response => {\n                let responseData = response.data.data.data[0]\n                data.form = {\n                    category: responseData.categoryId,\n                    title: responseData.title,\n                    content: responseData.content\n                }\n            })\n        }\n        const resetForm = () => {\n            refs.addInfoForm.resetFields();\n            // data.form.category = ''\n            // data.form.title = ''\n            // data.form.content = ''\n        }\n        const submit = () => {\n            let requestData = {\n                id: props.id,\n                categoryId: data.form.category,\n                title: data.form.title,\n                content: data.form.content,\n            }\n            if(!data.form.category) {\n                root.$message({\n                    message: '分类不能为空！！',\n                    type: 'error'\n                })\n                return false;\n            }\n            data.submitLoading = true\n            EdidInfo(requestData).then(response => {\n                let responseData = response.data\n                root.$message({\n                    message: responseData.message,\n                    type: 'success'\n                })\n                data.submitLoading = false\n                /**\n                 * 两种刷新数据方式\n                 * 1、暴力型，直接刷新接口\n                 * 2、返回列表，手动修改指定的数据\n                 */\n                emit(\"getListEmit\");\n                // 重置表单\n                // resetForm()\n                // root.$refs['addInfoForm'].resetFields();\n            }).catch(error => {\n                data.submitLoading = false\n            })\n        }\n        return {\n            data,\n            // methods\n            close, openDialog, submit\n        }\n    }\n}\n</script>\n<style scoped>\n\n</style>"]}]}