{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/detailed.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/views/Info/detailed.vue","mtime":1614739307045},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEdldExpc3QsIEVkaWRJbmZvIH0gZnJvbSAiQC9hcGkvbmV3cyI7CmltcG9ydCB7IHRpbWVzdGFtcFRvVGltZSB9IGZyb20gIkAvdXRpbHMvY29tbW9uIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgd2F0Y2gsIG9uTW91bnRlZCwgb25BY3RpdmF0ZWQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7Ci8vIOe7hOS7tgppbXBvcnQgVXBsb2FkSW1nIGZyb20gIkBjL1VwbG9hZEltZyIKLy8g5a+M5paH5pys57yW6L6R5ZmoCmltcG9ydCB7IHF1aWxsRWRpdG9yIH0gZnJvbSAidnVlLXF1aWxsLWVkaXRvciI7IAppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MnOwppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuc25vdy5jc3MnOwppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuYnViYmxlLmNzcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZm9EZXRhaWxlZCIsCiAgY29tcG9uZW50czogeyBxdWlsbEVkaXRvciwgVXBsb2FkSW1nIH0sCiAgc2V0dXAocHJvcHMsIHsgcm9vdCB9KXsKICAgIC8vIOWbvueJh+S4iuS8oOmFjee9rgogICAgY29uc3QgdXBsb2FkSW1nQ29uZmlnID0gcmVhY3RpdmUoewogICAgICBhY3Rpb246ICJodHRwOi8vdXAtejIucWluaXVwLmNvbSIsCiAgICAgIGFjY2Vzc2tleTogInRsTVRGQnBqQ01yRkttSG5mNjY0VXBSM3dSNmR3SEFUNVNDaHBaZCIsCiAgICAgIHNlY3JldGtleTogInR5bzg3S3Y3YUNPdGNORHNaX0dpMUlEX24yQkxlTlFyc09UTTlLcnUiLAogICAgICBidWNrZXR5OiAiaW5kZXhodG1sIgogICAgfSk7CgogICAgY29uc3QgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgaWQ6IHJvb3QuJHJvdXRlLnBhcmFtcy5pZCB8fCByb290LiRzdG9yZS5nZXR0ZXJzWyJpbmZvRGV0YWlsZWQvaW5mb0lkIl0sCiAgICAgIGNhdGVnb3J5OiBbXSwKICAgICAgZWRpdG9yT3B0aW9uOiB7fSwKICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UKICAgIH0pCgogICAgY29uc3QgZm9ybSA9IHJlYWN0aXZlKHsKICAgICAgY2F0ZWdvcnlJZDogIiIsCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY3JlYXRlRGF0ZTogIiIsCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBpbWdVcmw6ICIiCiAgICB9KQogCgogICAgLyoqCiAgICAgICog6I635Y+W5L+h5oGv5YiG57G7CiAgICAgICovCiAgICBjb25zdCBnZXRJbmZvQ2F0ZWdvcnkgPSAoKSA9PiB7CiAgICAgIHJvb3QuJHN0b3JlLmRpc3BhdGNoKCdjb21tb24vZ2V0SW5mb0NhdGVnb3J5JykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgZGF0YS5jYXRlZ29yeSA9IHJlc3BvbnNlCiAgICAgIH0pCiAgICB9CgogICAgLyoqCiAgICAgKiDojrflj5blvZPliY1JROeahOS/oeaBrwogICAgICovCiAgICBjb25zdCBnZXRJbmZvID0gKCkgPT4gewogICAgICBsZXQgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICBwYWdlU2l6ZTogMSwKICAgICAgICBpZDogZGF0YS5pZAogICAgICB9CiAgICAgIEdldExpc3QocmVxdWVzdERhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGxldCByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEuZGF0YVswXQogICAgICAgIGZvcm0uY2F0ZWdvcnlJZCA9IHJlc3BvbnNlRGF0YS5jYXRlZ29yeUlkOwogICAgICAgIGZvcm0udGl0bGUgPSByZXNwb25zZURhdGEudGl0bGU7CiAgICAgICAgZm9ybS5jcmVhdGVEYXRlID0gdGltZXN0YW1wVG9UaW1lKHJlc3BvbnNlRGF0YS5jcmVhdGVEYXRlKTsKICAgICAgICBmb3JtLmNvbnRlbnQgPSByZXNwb25zZURhdGEuY29udGVudDsKICAgICAgICBmb3JtLmltZ1VybCA9IHJlc3BvbnNlRGF0YS5pbWdVcmw7CiAgICAgIH0pCiAgICB9CgogICAgLyoqCiAgICAgKiDkv53lrZjvvIjkv67mlLnmlbDmja7ml7bvvIzlv4Xpobvms6jmhI/nmoTvvJrkuIDlrprpnIDopoHkuIDkuKpJRO+8iQogICAgICovCiAgICBjb25zdCBzdWJtaXQgPSAoKSA9PiB7CiAgICAgIGxldCByZXF1ZXN0RGF0YSA9IHsKICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICBjYXRlZ29yeUlkOiBmb3JtLmNhdGVnb3J5SWQsCiAgICAgICAgdGl0bGU6IGZvcm0udGl0bGUsCiAgICAgICAgY29udGVudDogZm9ybS5jb250ZW50LAogICAgICAgIGltZ1VybDogZm9ybS5pbWdVcmwKICAgICAgfQogICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSB0cnVlCiAgICAgIEVkaWRJbmZvKHJlcXVlc3REYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBsZXQgcmVzcG9uc2VEYXRhID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHJvb3QuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2VEYXRhLm1lc3NhZ2UsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KQogICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9CgogICAgb25Nb3VudGVkKCgpID0+IHsKICAgICAgZ2V0SW5mb0NhdGVnb3J5KCkKICAgIH0pCgogICAgb25BY3RpdmF0ZWQoKCkgPT4gewogICAgICBkYXRhLmlkID0gcm9vdC4kcm91dGUucGFyYW1zLmlkIHx8IHJvb3QuJHN0b3JlLmdldHRlcnNbImluZm9EZXRhaWxlZC9pbmZvSWQiXTsKICAgICAgZ2V0SW5mbygpCiAgICB9KQoKCiAgICByZXR1cm4gewogICAgICBkYXRhLCBmb3JtLCBzdWJtaXQsIHVwbG9hZEltZ0NvbmZpZwogICAgfQogIH0KfQo="},{"version":3,"sources":["detailed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"detailed.vue","sourceRoot":"src/views/Info","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n\n    <el-form-item label=\"信息分类：\">\n      <el-select v-model=\"form.categoryId\">\n        <el-option v-for=\"item in data.category\" :key=\"item.id\" :value=\"item.id\" :label=\"item.category_name\"></el-option>\n      </el-select>\n    </el-form-item>\n\n    <el-form-item label=\"新闻标题：\">\n      <el-input v-model=\"form.title\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"缩略图：\">\n      <UploadImg :imgUrl.sync=\"form.imgUrl\" :config=\"uploadImgConfig\" />\n    </el-form-item>\n\n    <el-form-item label=\"发布日期：\">\n      <el-date-picker v-model=\"form.createDate\" type=\"date\" placeholder=\"选择日期\" disabled></el-date-picker>\n    </el-form-item>\n\n    <el-form-item label=\"详细内容：\">\n      <quillEditor v-model=\"form.content\" ref=\"myQuillEditor\" :options=\"data.editorOption\"/>\n    </el-form-item>\n\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submit\" :loading=\"data.submitLoading\">保存</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport { GetList, EdidInfo } from \"@/api/news\";\nimport { timestampToTime } from \"@/utils/common\";\nimport { reactive, ref, watch, onMounted, onActivated } from '@vue/composition-api';\n// 组件\nimport UploadImg from \"@c/UploadImg\"\n// 富文本编辑器\nimport { quillEditor } from \"vue-quill-editor\"; \nimport 'quill/dist/quill.core.css';\nimport 'quill/dist/quill.snow.css';\nimport 'quill/dist/quill.bubble.css';\n\nexport default {\n  name: \"infoDetailed\",\n  components: { quillEditor, UploadImg },\n  setup(props, { root }){\n    // 图片上传配置\n    const uploadImgConfig = reactive({\n      action: \"http://up-z2.qiniup.com\",\n      accesskey: \"tlMTFBpjCMrFKmHnf664UpR3wR6dwHAT5SChpZd\",\n      secretkey: \"tyo87Kv7aCOtcNDsZ_Gi1ID_n2BLeNQrsOTM9Kru\",\n      buckety: \"indexhtml\"\n    });\n\n    const data = reactive({\n      id: root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"],\n      category: [],\n      editorOption: {},\n      submitLoading: false\n    })\n\n    const form = reactive({\n      categoryId: \"\",\n      title: \"\",\n      createDate: \"\",\n      content: \"\",\n      imgUrl: \"\"\n    })\n \n\n    /**\n      * 获取信息分类\n      */\n    const getInfoCategory = () => {\n      root.$store.dispatch('common/getInfoCategory').then(response => {\n        data.category = response\n      })\n    }\n\n    /**\n     * 获取当前ID的信息\n     */\n    const getInfo = () => {\n      let requestData = {\n        pageNumber: 1,\n        pageSize: 1,\n        id: data.id\n      }\n      GetList(requestData).then(response => {\n        let responseData = response.data.data.data[0]\n        form.categoryId = responseData.categoryId;\n        form.title = responseData.title;\n        form.createDate = timestampToTime(responseData.createDate);\n        form.content = responseData.content;\n        form.imgUrl = responseData.imgUrl;\n      })\n    }\n\n    /**\n     * 保存（修改数据时，必须注意的：一定需要一个ID）\n     */\n    const submit = () => {\n      let requestData = {\n        id: data.id,\n        categoryId: form.categoryId,\n        title: form.title,\n        content: form.content,\n        imgUrl: form.imgUrl\n      }\n      data.submitLoading = true\n      EdidInfo(requestData).then(response => {\n        let responseData = response.data\n        root.$message({\n          message: responseData.message,\n          type: 'success'\n        })\n        data.submitLoading = false\n      }).catch(error => {\n          data.submitLoading = false\n      })\n    }\n\n    onMounted(() => {\n      getInfoCategory()\n    })\n\n    onActivated(() => {\n      data.id = root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"];\n      getInfo()\n    })\n\n\n    return {\n      data, form, submit, uploadImgConfig\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>"]}]}