{"remainingRequest":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace/vue-admin/src/views/Login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace/vue-admin/src/views/Login/index.vue","mtime":1614133839831},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlYWN0aXZlLHJlZixpc1JlZix0b1JlZnMsb25Nb3VudGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBzdHJpcHNjcmlwdCx2YWxpZGF0ZUVtYWlsLHZhbGlkYXRlUGFzcyx2YWxpZGF0ZUNvZGUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2xvZ2luJywKICAgIHNldHVwKHByb3BzLHsgcmVmcyB9KXsKICAgICAgICAvL+mqjOivgeeUqOaIt+WQjQogICAgICAgIGxldCB2YWxpZGF0ZVVzZXJuYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeeUqOaIt+WQjScpKTsKICAgICAgICAgICAgfSBlbHNlIGlmKHZhbGlkYXRlRW1haWwodmFsdWUpKXsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign55So5oi35ZCN5qC85byP5pyJ6K+vJykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsgLy90cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8v6aqM6K+B5a+G56CBCiAgICAgICAgbGV0IHZhbGlkYXRlUGFzc3dvcmQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIC8v6L+H5ruk5ZCO55qE5pWw5o2uCiAgICAgICAgICAgIHJ1bGVGb3JtLnBhc3N3b3JkID0gc3RyaXBzY3JpcHQodmFsdWUpOwogICAgICAgICAgICB2YWx1ZSA9IHJ1bGVGb3JtLnBhc3N3b3JkOwogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWvhueggScpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxpZGF0ZVBhc3ModmFsdWUpKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+WvhueggeS4ujboh7MyMOS9jeeahOaVsOWtlyvlrZfmr40nKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAvL+mqjOivgemHjeWkjeWvhueggQogICAgICAgIGxldCB2YWxpZGF0ZVBhc3N3b3JkcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgICAgLy/lpoLmnpzmqKHlnZflgLzkuLpsb2dpbu+8jOebtOaOpemAmui/h++8jOaXoOmcgOmqjOivgemHjeWkjeWvhueggeOAggogICAgICAgICAgICBpZihtb2RlbC52YWx1ZSA9PT0gJ2xvZ2luJyl7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8v6L+H5ruk5ZCO55qE5pWw5o2uCiAgICAgICAgICAgIHJ1bGVGb3JtLnBhc3N3b3JkcyA9IHN0cmlwc2NyaXB0KHZhbHVlKTsKICAgICAgICAgICAgdmFsdWUgPSBydWxlRm9ybS5wYXNzd29yZHM7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9IHJ1bGVGb3JtLnBhc3N3b3JkKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+mHjeWkjeWvhueggeS4jeato+ehricpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8v6aqM6K+B6aqM6K+B56CBCiAgICAgICAgbGV0IGNoZWNrQ29kZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl6aqM6K+B56CBJykpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbGlkYXRlQ29kZSh2YWx1ZSkpewogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6aqM6K+B56CB5qC85byP5pyJ6K+vJykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLyoqCiAgICAgICAgICog5aOw5piO5pWw5o2uCiAgICAgICAgICovCiAgICAgICAgLy/ov5nph4zpnaLmlL7nva5kYXRh5pWw5o2u44CB55Sf5ZG95ZGo5pyf44CB6Ieq5a6a5LmJ5Ye95pWwCiAgICAgICAgY29uc3QgbWVudVRhYiA9IHJlYWN0aXZlKFsKICAgICAgICAgICAgeyB0eHQ6ICfnmbvlvZUnLCBjdXJyZW50OiB0cnVlLHR5cGU6ICdsb2dpbicgfSwKICAgICAgICAgICAgeyB0eHQ6ICfms6jlhownLCBjdXJyZW50OiBmYWxzZSx0eXBlOiAncmVnaXN0ZXInIH0KICAgICAgICBdKQogICAgICAgIC8v5qih5Z2X5YC8CiAgICAgICAgY29uc3QgbW9kZWwgPSByZWYoJ2xvZ2luJykKICAgICAgICAvL+ihqOWNlee7keWumuaVsOaNrgogICAgICAgIGNvbnN0IHJ1bGVGb3JtID0gcmVhY3RpdmUgKHsKICAgICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgICBwYXNzZW9yZDogJycsCiAgICAgICAgICAgIHBhc3N3b3JkczogJycsCiAgICAgICAgICAgIGNvZGU6ICcnCiAgICAgICAgfSkKICAgICAgICAvL+ihqOWNlemqjOivgQogICAgICAgIGNvbnN0IHJ1bGVzID0gcmVhY3RpdmUgKHsKICAgICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICAgIHsgdmFsaWRhdG9yOiB2YWxpZGF0ZVVzZXJuYW1lLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgXSwKICAgICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICAgIHsgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3N3b3JkLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgXSwKICAgICAgICAgIHBhc3N3b3JkczogWwogICAgICAgICAgICB7IHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzd29yZHMsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICBdLAogICAgICAgICAgY29kZTogWwogICAgICAgICAgICB7IHZhbGlkYXRvcjogY2hlY2tDb2RlLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgXQogICAgICAgIH0pCiAgICAgICAgLyoqCiAgICAgICAgICog5aOw5piO5Ye95pWwCiAgICAgICAgICovCiAgICAgICAgY29uc3QgdG9nZ2xlTWVudSA9IChkYXRhID0+IHsKICAgICAgICAgICAgbWVudVRhYi5mb3JFYWNoKChlbGVtLGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBlbGVtLmN1cnJlbnQgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8v6auY5YWJCiAgICAgICAgICAgIGRhdGEuY3VycmVudCA9IHRydWU7CiAgICAgICAgICAgIC8v5L+u5pS55qih5Z2X5YC8CiAgICAgICAgICAgIG1vZGVsLnZhbHVlID0gZGF0YS50eXBlOwogICAgICAgIH0pCiAgICAgICAgY29uc3Qgc3VibWl0Rm9ybSA9IChmb3JtTmFtZSA9PiB7CiAgICAgICAgICAgIHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ3N1Ym1pdCEnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgLyoqCiAgICAgICAgICog55Sf5ZG95ZGo5pyfCiAgICAgICAgICovCiAgICAgICAgLy/mjILlnKjlrozmiJDlkI4KICAgICAgICBvbk1vdW50ZWQgKCgpID0+IHsKCiAgICAgICAgfSkKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtZW51VGFiLAogICAgICAgICAgICBtb2RlbCwKICAgICAgICAgICAgdG9nZ2xlTWVudSwKICAgICAgICAgICAgc3VibWl0Rm9ybSwKICAgICAgICAgICAgcnVsZUZvcm0sCiAgICAgICAgICAgIHJ1bGVzCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\n    <div id=\"login\">\n        <div class=\"login-wrap\">\n            <ul class=\"menu-tab\"> \n                <li v-for=\"item in menuTab\" :key=\"item.id\" :class=\"{'current': item.current}\" @click=\"toggleMenu(item)\">{{ item.txt }}</li>\n            </ul>\n            <!--表单 start -->\n            <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" class=\"login-form\" size=\"medium\">\n                \n                <el-form-item prop=\"username\" class=\"item-form\">\n                    <label>邮箱</label>\n                    <el-input type=\"text\" v-model=\"ruleForm.username\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"password\" class=\"item-form\">\n                    <label>密码</label>\n                    <el-input type=\"password\" v-model=\"ruleForm.password\" autocomplete=\"off\" minlength=\"6\" maxlength=\"20\"></el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"passwords\" class=\"item-form\" v-show=\"model ==='register'\">\n                    <label>重复密码</label>\n                    <el-input type=\"password\" v-model=\"ruleForm.passwords\" autocomplete=\"off\" minlength=\"6\" maxlength=\"20\"></el-input>\n                </el-form-item>\n\n                <el-form-item prop=\"code\" class=\"item-form\">\n                    <label>验证码</label>\n                    <el-row :gutter=\"11\">\n                        <el-col :span=\"15\">\n                            <el-input v-model.number=\"ruleForm.code\" minlength=\"6\" maxlength=\"6\"></el-input>\n                        </el-col>\n                        <el-col :span=\"9\">\n                            <el-button type=\"success\" class=\"block\">获取验证码</el-button>\n                        </el-col>\n                    </el-row>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"danger\" @click=\"submitForm('ruleForm')\" class=\"block login-btn\">提交</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n<script>\nimport { reactive,ref,isRef,toRefs,onMounted } from '@vue/composition-api';\nimport { stripscript,validateEmail,validatePass,validateCode } from '@/utils/validate.js';\nexport default {\n    name: 'login',\n    setup(props,{ refs }){\n        //验证用户名\n        let validateUsername = (rule, value, callback) => {\n            if (value === '') {\n                callback(new Error('请输入用户名'));\n            } else if(validateEmail(value)){\n                callback(new Error('用户名格式有误'));\n            } else {\n                callback(); //true\n            }\n        };\n        //验证密码\n        let validatePassword = (rule, value, callback) => {\n            //过滤后的数据\n            ruleForm.password = stripscript(value);\n            value = ruleForm.password;\n            if (value === '') {\n                callback(new Error('请输入密码'));\n            } else if (validatePass(value)) {\n                callback(new Error('密码为6至20位的数字+字母'));\n            } else {\n                callback();\n            }\n        };\n        //验证重复密码\n        let validatePasswords = (rule, value, callback) => {\n            //如果模块值为login，直接通过，无需验证重复密码。\n            if(model.value === 'login'){\n                callback();\n            }\n            //过滤后的数据\n            ruleForm.passwords = stripscript(value);\n            value = ruleForm.passwords;\n            if (value === '') {\n                callback(new Error('请再次输入密码'));\n            } else if (value != ruleForm.password) {\n                callback(new Error('重复密码不正确'));\n            } else {\n                callback();\n            }\n        };\n        //验证验证码\n        let checkCode = (rule, value, callback) => {\n            if (value === '') {\n                return callback(new Error('请输入验证码'));\n            } else if (validateCode(value)){\n                return callback(new Error('验证码格式有误'));\n            } else {\n                callback();\n            }\n        };\n        /**\n         * 声明数据\n         */\n        //这里面放置data数据、生命周期、自定义函数\n        const menuTab = reactive([\n            { txt: '登录', current: true,type: 'login' },\n            { txt: '注册', current: false,type: 'register' }\n        ])\n        //模块值\n        const model = ref('login')\n        //表单绑定数据\n        const ruleForm = reactive ({\n            username: '',\n            passeord: '',\n            passwords: '',\n            code: ''\n        })\n        //表单验证\n        const rules = reactive ({\n          username: [\n            { validator: validateUsername, trigger: 'blur' }\n          ],\n          password: [\n            { validator: validatePassword, trigger: 'blur' }\n          ],\n          passwords: [\n            { validator: validatePasswords, trigger: 'blur' }\n          ],\n          code: [\n            { validator: checkCode, trigger: 'blur' }\n          ]\n        })\n        /**\n         * 声明函数\n         */\n        const toggleMenu = (data => {\n            menuTab.forEach((elem,index) => {\n                elem.current = false;\n            });\n            //高光\n            data.current = true;\n            //修改模块值\n            model.value = data.type;\n        })\n        const submitForm = (formName => {\n            refs[formName].validate((valid) => {\n                if (valid) {\n                    alert('submit!');\n                } else {\n                    console.log('error submit!!');\n                    return false;\n                }\n            })\n        })\n        /**\n         * 生命周期\n         */\n        //挂在完成后\n        onMounted (() => {\n\n        })\n        return {\n            menuTab,\n            model,\n            toggleMenu,\n            submitForm,\n            ruleForm,\n            rules\n        }\n    }\n}\n</script>\n<style>\n.login-wrap .login-form .block {\n    display: block;\n    width: 100%;\n}\n\n</style>\n<style lang=\"scss\" scoped>\n#login{\n    height: 100vh;\n    background-color: #344a5f;\n}\n.login-wrap {\n    width: 330px;\n    margin: auto;\n}\n.menu-tab {\n    text-align: center;\n    li {\n        display: inline-block;\n        width: 88px;\n        line-height: 36px;\n        font-size: 14px;\n        color: #fff;\n        border-radius: 2px;\n        cursor: pointer;\n    }\n    .current {\n        background-color: rgba(0,0,0,.1);\n    }\n    .login-form {\n        margin-top: 29px;\n        label {\n            display: block;\n            margin-bottom: 3px;\n            font-size: 14px;\n            color: #fff;\n        }\n        .item-form {\n            margin-bottom: 13px;\n        }\n        .login-btn {\n          margin-top: 19px;\n        }\n    }\n}\n</style>"]}]}