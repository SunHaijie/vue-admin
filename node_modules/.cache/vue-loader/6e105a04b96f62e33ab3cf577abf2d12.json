{"remainingRequest":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace-vs/vue-admin/src/views/Info/dialog/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/src/views/Info/dialog/info.vue","mtime":1614523755442},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/babel-loader/lib/index.js","mtime":1613959810487},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFkZEluZm8gfSBmcm9tICJAL2FwaS9uZXdzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgd2F0Y2ggfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdkaWFsb2dJbmZvJywKICAgIHByb3BzOiB7CiAgICAgICAgZmxhZzogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgY2F0ZWdvcnk6IHsKICAgICAgICAgICAgdHlwZTogQXJyYXksCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICAgICAgfQogICAgfSwKICAgIC8vIHZ1ZTIuMAogICAgLy8gZGF0YSgpewogICAgLy8gICAgIHJldHVybiAgewogICAgLy8gICAgICAgICBkaWFsb2dfaW5mb19mbGFnOiBmYWxzZSwKICAgIC8vICAgICAgICAgZm9ybUxhYmVsV2lkdGg6ICc3MHB4JywKICAgIC8vICAgICAgICAgZm9ybTogewogICAgLy8gICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLAogICAgLy8gICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgLy8gICAgICAgICAgICAgY29udGVudDogJycKICAgIC8vICAgICAgICAgfSwKICAgIC8vICAgICAgICAgY2F0ZWdvcnlPcHRpb246IFtdLAogICAgLy8gICAgICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZQogICAgLy8gICAgIH0KICAgIC8vIH0sCiAgICBzZXR1cChwcm9wcywgeyBlbWl0LCByb290LCByZWZzIH0pewogICAgICAgIC8qKgogICAgICAgICAqIOaVsOaNrgogICAgICAgICAqLwogICAgICAgIGNvbnN0IGRhdGEgPSByZWFjdGl2ZSh7CiAgICAgICAgICAgIGRpYWxvZ19pbmZvX2ZsYWc6IGZhbHNlLCAgLy8g5by556qX5qCH6K6wCiAgICAgICAgICAgIGZvcm1MYWJlbFdpZHRoOiAnNzBweCcsCiAgICAgICAgICAgIGZvcm06IHsKICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOWIhuexu+S4i+aLiQogICAgICAgICAgICBjYXRlZ29yeU9wdGlvbjogW10sCiAgICAgICAgICAgIC8vIOaMiemSruWKoOi9vQogICAgICAgICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIC8vIHdhdGNoCiAgICAgICAgd2F0Y2goKCkgPT4gZGF0YS5kaWFsb2dfaW5mb19mbGFnID0gcHJvcHMuZmxhZyk7CiAgICAgICAgLyoqCiAgICAgICAgICogdnVlMi4wIG1ldGhvZHMKICAgICAgICAgKi8KICAgICAgICBjb25zdCBjbG9zZSA9ICgpID0+IHsKICAgICAgICAgICAgZGF0YS5kaWFsb2dfaW5mb19mbGFnID0gZmFsc2U7CiAgICAgICAgICAgIHJlc2V0Rm9ybSgpCiAgICAgICAgICAgIGVtaXQoInVwZGF0ZTpmbGFnIiwgZmFsc2UpOwogICAgICAgIH0KICAgICAgICBjb25zdCBvcGVuRGlhbG9nID0gKCkgPT4gewogICAgICAgICAgICBkYXRhLmNhdGVnb3J5T3B0aW9uID0gcHJvcHMuY2F0ZWdvcnkKICAgICAgICB9CiAgICAgICAgY29uc3QgcmVzZXRGb3JtID0gKCkgPT4gewogICAgICAgICAgICByZWZzLmFkZEluZm9Gb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgIC8vIGRhdGEuZm9ybS5jYXRlZ29yeSA9ICcnCiAgICAgICAgICAgIC8vIGRhdGEuZm9ybS50aXRsZSA9ICcnCiAgICAgICAgICAgIC8vIGRhdGEuZm9ybS5jb250ZW50ID0gJycKICAgICAgICB9CiAgICAgICAgY29uc3Qgc3VibWl0ID0gKCkgPT4gewogICAgICAgICAgICBsZXQgcmVxdWVzdERhdGEgPSB7CiAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5mb3JtLmNhdGVnb3J5LAogICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuZm9ybS50aXRsZSwKICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGRhdGEuZm9ybS5jb250ZW50LAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCFkYXRhLmZvcm0uY2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgIHJvb3QuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliIbnsbvkuI3og73kuLrnqbrvvIHvvIEnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0YS5zdWJtaXRMb2FkaW5nID0gdHJ1ZQogICAgICAgICAgICBBZGRJbmZvKHJlcXVlc3REYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGxldCByZXNwb25zZURhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgICByb290LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZURhdGEubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBkYXRhLnN1Ym1pdExvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgLy8g5YWz6Zet5by556qXCiAgICAgICAgICAgICAgICBjbG9zZSgpCiAgICAgICAgICAgICAgICAvLyDlm57osIPniLbnuqfmlbDmja4KICAgICAgICAgICAgICAgIGVtaXQoJ2dldExpc3RFbWl0Jyk7CiAgICAgICAgICAgICAgICAvLyByb290LiRyZWZzWydhZGRJbmZvRm9ybSddLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGRhdGEuc3VibWl0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGEsCiAgICAgICAgICAgIC8vIG1ldGhvZHMKICAgICAgICAgICAgY2xvc2UsIG9wZW5EaWFsb2csIHN1Ym1pdAogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/Info/dialog","sourcesContent":["<template>\n    <el-dialog title=\"新增\" :visible.sync=\"data.dialog_info_flag\" @close=\"close\" width=\"580px\" @opened=\"openDialog\">\n        <el-form :model=\"data.form\" ref=\"addInfoForm\">\n            <el-form-item label=\"类别：\" :label-width=\"data.formLabelWidth\" prop=\"category\">\n                <el-select v-model=\"data.form.category\" placeholder=\"请选择活动区域\">\n                    <el-option \n                    v-for=\"item in data.categoryOption\" \n                    :key=\"item.id\" \n                    :label=\"item.category_name\" \n                    :value=\"item.id\">\n                    </el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"标题：\" :label-width=\"data.formLabelWidth\" prop=\"title\">\n                <el-input v-model=\"data.form.title\" placehoder=\"请输入标题\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"概况：\" :label-width=\"data.formLabelWidth\" prop=\"content\">\n                <el-input type=\"textarea\" v-model=\"data.form.content\" placehoder=\"请输入内容\"></el-input>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"close\">取消</el-button>\n            <el-button type=\"danger\" :loading=\"data.submitLoading\" @click=\"submit\">确定</el-button>\n        </div>\n    </el-dialog>\n</template>\n<script>\nimport { AddInfo } from \"@/api/news\";\nimport { reactive, ref, watch } from '@vue/composition-api';\nexport default {\n    name: 'dialogInfo',\n    props: {\n        flag: {\n            type: Boolean,\n            default: false\n        },\n        category: {\n            type: Array,\n            default: () => []\n        }\n    },\n    // vue2.0\n    // data(){\n    //     return  {\n    //         dialog_info_flag: false,\n    //         formLabelWidth: '70px',\n    //         form: {\n    //             category: '',\n    //             title: '',\n    //             content: ''\n    //         },\n    //         categoryOption: [],\n    //         submitLoading: false\n    //     }\n    // },\n    setup(props, { emit, root, refs }){\n        /**\n         * 数据\n         */\n        const data = reactive({\n            dialog_info_flag: false,  // 弹窗标记\n            formLabelWidth: '70px',\n            form: {\n                category: '',\n                title: '',\n                content: ''\n            },\n            // 分类下拉\n            categoryOption: [],\n            // 按钮加载\n            submitLoading: false\n        });\n        // watch\n        watch(() => data.dialog_info_flag = props.flag);\n        /**\n         * vue2.0 methods\n         */\n        const close = () => {\n            data.dialog_info_flag = false;\n            resetForm()\n            emit(\"update:flag\", false);\n        }\n        const openDialog = () => {\n            data.categoryOption = props.category\n        }\n        const resetForm = () => {\n            refs.addInfoForm.resetFields();\n            // data.form.category = ''\n            // data.form.title = ''\n            // data.form.content = ''\n        }\n        const submit = () => {\n            let requestData = {\n                category: data.form.category,\n                title: data.form.title,\n                content: data.form.content,\n            }\n            if(!data.form.category) {\n                root.$message({\n                    message: '分类不能为空！！',\n                    type: 'error'\n                })\n                return false;\n            }\n            data.submitLoading = true\n            AddInfo(requestData).then(response => {\n                let responseData = response.data\n                root.$message({\n                    message: responseData.message,\n                    type: 'success'\n                })\n                data.submitLoading = false\n                // 关闭弹窗\n                close()\n                // 回调父级数据\n                emit('getListEmit');\n                // root.$refs['addInfoForm'].resetFields();\n            }).catch(error => {\n                data.submitLoading = false\n            })\n        }\n        return {\n            data,\n            // methods\n            close, openDialog, submit\n        }\n    }\n}\n</script>\n<style scoped>\n\n</style>"]}]}