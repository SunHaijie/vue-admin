{"remainingRequest":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Jeff/Documents/workspace-vs/vue-admin/src/views/Info/detailed.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/src/views/Info/detailed.vue","mtime":1614759444939},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/css-loader/dist/cjs.js","mtime":1613959812332},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1613959818681},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/postcss-loader/src/index.js","mtime":1613959815802},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/sass-loader/dist/cjs.js","mtime":1613959817599},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1613959811244},{"path":"/Users/Jeff/Documents/workspace-vs/vue-admin/node_modules/vue-loader/lib/index.js","mtime":1613959818680}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZCB7CiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQ6aG92ZXIgewogIGJvcmRlci1jb2xvcjogIzQwOUVGRjsKfQouYXZhdGFyLXVwbG9hZGVyLWljb24gewogIGZvbnQtc2l6ZTogMjhweDsKICBjb2xvcjogIzhjOTM5ZDsKICB3aWR0aDogMTc4cHg7CiAgaGVpZ2h0OiAxNzhweDsKICBsaW5lLWhlaWdodDogMTc4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5hdmF0YXIgewogIHdpZHRoOiAxNzhweDsKICBoZWlnaHQ6IDE3OHB4OwogIGRpc3BsYXk6IGJsb2NrOwp9Cg=="},{"version":3,"sources":["detailed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detailed.vue","sourceRoot":"src/views/Info","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n\n    <el-form-item label=\"信息分类：\">\n      <el-select v-model=\"form.categoryId\">\n        <el-option v-for=\"item in data.category\" :key=\"item.id\" :value=\"item.id\" :label=\"item.category_name\"></el-option>\n      </el-select>\n    </el-form-item>\n\n    <el-form-item label=\"新闻标题：\">\n      <el-input v-model=\"form.title\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"缩略图：\">\n      <UploadImg :imgUrl.sync=\"form.imgUrl\" :config=\"uploadImgConfig\" />\n    </el-form-item>\n\n    <el-form-item label=\"发布日期：\">\n      <el-date-picker v-model=\"form.createDate\" type=\"date\" placeholder=\"选择日期\" disabled></el-date-picker>\n    </el-form-item>\n\n    <el-form-item label=\"详细内容：\">\n      <quillEditor v-model=\"form.content\" ref=\"myQuillEditor\" :options=\"data.editorOption\"/>\n    </el-form-item>\n\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submit\" :loading=\"data.submitLoading\">保存</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport { GetList, EditInfo } from \"@/api/news\";\nimport { timestampToTime } from \"@/utils/common\";\nimport { reactive, ref, watch, onMounted, onActivated } from '@vue/composition-api';\n// 组件\nimport UploadImg from \"@c/UploadImg\"\n// 富文本编辑器\nimport { quillEditor } from \"vue-quill-editor\"; \nimport 'quill/dist/quill.core.css';\nimport 'quill/dist/quill.snow.css';\nimport 'quill/dist/quill.bubble.css';\n\nexport default {\n  name: \"infoDetailed\",\n  components: { quillEditor, UploadImg },\n  setup(props, { root }){\n    // 图片上传配置\n    const uploadImgConfig = reactive({\n      action: \"http://up-z2.qiniup.com\",\n      accesskey: \"Avh-EZZAa4TxqPQZsEW42fXBUbTMFi-RKSZTRKJj\",\n      secretkey: \"l9AXtnhCVkZexXNRcmHXzmecXiCUiLynwGboMeUw\",\n      buckety: \"webjshtml\"\n    });\n\n    const data = reactive({\n      id: root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"],\n      category: [],\n      editorOption: {},\n      submitLoading: false\n    })\n\n    const form = reactive({\n      categoryId: \"\",\n      title: \"\",\n      createDate: \"\",\n      content: \"\",\n      imgUrl: \"\"\n    })\n \n\n    /**\n      * 获取信息分类\n      */\n    const getInfoCategory = () => {\n      root.$store.dispatch('common/getInfoCategory').then(response => {\n        data.category = response\n      })\n    }\n\n    /**\n     * 获取当前ID的信息\n     */\n    const getInfo = () => {\n      let requestData = {\n        pageNumber: 1,\n        pageSize: 1,\n        id: data.id\n      }\n      GetList(requestData).then(response => {\n        let responseData = response.data.data.data[0]\n        form.categoryId = responseData.categoryId;\n        form.title = responseData.title;\n        form.createDate = timestampToTime(responseData.createDate);\n        form.content = responseData.content;\n        form.imgUrl = responseData.imgUrl;\n      })\n    }\n\n    /**\n     * 保存（修改数据时，必须注意的：一定需要一个ID）\n     */\n    const submit = () => {\n      let requestData = {\n        id: data.id,\n        categoryId: form.categoryId,\n        title: form.title,\n        content: form.content,\n        imgUrl: form.imgUrl\n      }\n      data.submitLoading = true\n      EditInfo(requestData).then(response => {\n        let responseData = response.data\n        root.$message({\n          message: responseData.message,\n          type: 'success'\n        })\n        data.submitLoading = false\n      }).catch(error => {\n          data.submitLoading = false\n      })\n    }\n\n    onMounted(() => {\n      getInfoCategory()\n    })\n\n    onActivated(() => {\n      data.id = root.$route.params.id || root.$store.getters[\"infoDetailed/infoId\"];\n      getInfo()\n    })\n\n\n    return {\n      data, form, submit, uploadImgConfig\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>"]}]}